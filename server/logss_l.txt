INFO:     127.0.0.1:63926 - "GET /api/pdf-preview?gcs_key=statements%2F66cf10c5-443b-49f4-adee-7a35897bf08e%2F2025.01%20Breckpoint%20Statement.pdf HTTP/1.1" 307 Temporary Redirect
INFO:app.api.statements:üîç PDF preview requested for: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.api.statements:üîç Checking if file exists in GCS: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.api.statements:‚úÖ File exists, generating signed URL: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.services.gcs_utils:üîê Generating signed URL for: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.services.gcs_utils:üìù Generating signed URL with:
INFO:app.services.gcs_utils:   - Content-Type: application/pdf
INFO:app.services.gcs_utils:   - Content-Disposition: inline
INFO:app.services.gcs_utils:   - Expiration: 1 hour(s)
INFO:app.services.gcs_utils:‚úÖ Generated signed URL for GCS file with inline headers: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.services.gcs_utils:   URL expires at: 2025-11-22 01:29:42.082879
INFO:app.api.statements:‚úÖ Signed URL generated successfully for: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:     127.0.0.1:63926 - "GET /api/pdf-preview/?gcs_key=statements%2F66cf10c5-443b-49f4-adee-7a35897bf08e%2F2025.01%20Breckpoint%20Statement.pdf HTTP/1.1" 200 OK
INFO:app.api.statements:üîç PDF preview requested for: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.api.statements:üîç Checking if file exists in GCS: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.api.statements:‚úÖ File exists, generating signed URL: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.services.gcs_utils:üîê Generating signed URL for: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.services.gcs_utils:üìù Generating signed URL with:
INFO:app.services.gcs_utils:   - Content-Type: application/pdf
INFO:app.services.gcs_utils:   - Content-Disposition: inline
INFO:app.services.gcs_utils:   - Expiration: 1 hour(s)
INFO:app.services.gcs_utils:‚úÖ Generated signed URL for GCS file with inline headers: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.services.gcs_utils:   URL expires at: 2025-11-22 01:29:42.357521
INFO:app.api.statements:‚úÖ Signed URL generated successfully for: statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01 Breckpoint Statement.pdf
INFO:app.api.pdf_proxy:üîÑ Proxying PDF from: https://storage.googleapis.com/pdf_extraction_files_saver/statements/66cf10c5-443b-49f4-adee-7a35897...
INFO:     127.0.0.1:63926 - "GET /api/pdf-preview/?gcs_key=statements%2F66cf10c5-443b-49f4-adee-7a35897bf08e%2F2025.01%20Breckpoint%20Statement.pdf HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://storage.googleapis.com/pdf_extraction_files_saver/statements/66cf10c5-443b-49f4-adee-7a35897bf08e/2025.01%20Breckpoint%20Statement.pdf?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=docsai-table-extractor%40pdf-tables-extractor-465009.iam.gserviceaccount.com%2F20251122%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20251122T002942Z&X-Goog-Expires=3599&X-Goog-SignedHeaders=host&response-content-disposition=inline&response-content-type=application%2Fpdf&X-Goog-Signature=3b1d9acda7fa3f021e2eabb70389bea417aeecd6db43b53eff35d0f8dbcf7474ad1836f6b14ebff8c876be6bfeaf8e16efbc013a8e6402e3785399d16f20890610db5b0717c507ef14836a46510e695f55e0f81f543904aac0148a019d6f81f0bb3216a0ef9f0584a974d2551799ed2b02b2d1eee648017a8cbc88679056a543d965776265a3427957023eac07dc1ed629aed95754015700e86fa57bc43dfa45efa070138f7f1b740f8ecc2f6a305138238f0055eb121e14f77429985a9f30319a8a32e91379b8521747821d2c2327dfcd2b3d51dc8442bf620f90b35927700875736b4436022637d7b678b5eb99ad2f464b4b73cdd1286f4e605e909f9a757a "HTTP/1.1 200 OK"
INFO:     127.0.0.1:63961 - "GET /api/pdf-proxy?url=https%3A%2F%2Fstorage.googleapis.com%2Fpdf_extraction_files_saver%2Fstatements%2F66cf10c5-443b-49f4-adee-7a35897bf08e%2F2025.01%2520Breckpoint%2520Statement.pdf%3FX-Goog-Algorithm%3DGOOG4-RSA-SHA256%26X-Goog-Credential%3Ddocsai-table-extractor%2540pdf-tables-extractor-465009.iam.gserviceaccount.com%252F20251122%252Fauto%252Fstorage%252Fgoog4_request%26X-Goog-Date%3D20251122T002942Z%26X-Goog-Expires%3D3599%26X-Goog-SignedHeaders%3Dhost%26response-content-disposition%3Dinline%26response-content-type%3Dapplication%252Fpdf%26X-Goog-Signature%3D3b1d9acda7fa3f021e2eabb70389bea417aeecd6db43b53eff35d0f8dbcf7474ad1836f6b14ebff8c876be6bfeaf8e16efbc013a8e6402e3785399d16f20890610db5b0717c507ef14836a46510e695f55e0f81f543904aac0148a019d6f81f0bb3216a0ef9f0584a974d2551799ed2b02b2d1eee648017a8cbc88679056a543d965776265a3427957023eac07dc1ed629aed95754015700e86fa57bc43dfa45efa070138f7f1b740f8ecc2f6a305138238f0055eb121e14f77429985a9f30319a8a32e91379b8521747821d2c2327dfcd2b3d51dc8442bf620f90b35927700875736b4436022637d7b678b5eb99ad2f464b4b73cdd1286f4e605e909f9a757a HTTP/1.1" 200 OK
INFO:     127.0.0.1:63925 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:63925 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:64001 - "GET /api/companies/user-specific/8340174b-f6ed-42eb-976d-4868bb06c844/statements HTTP/1.1" 200 OK
INFO:     127.0.0.1:64002 - "GET /api/earned-commission/carrier/user-specific/8340174b-f6ed-42eb-976d-4868bb06c844/stats HTTP/1.1" 200 OK
INFO:app.services.orphan_cleanup_service:üßπ Starting orphan cleanup job...
INFO:     127.0.0.1:64166 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:64166 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:app.services.orphan_cleanup_service:‚úÖ Orphan cleanup completed: no orphans found
WARNING:app.api.websocket:WebSocket connection without explicit token for upload_id=upload_1763771444886_thbu0hbs6. This is allowed for progress tracking, but consider implementing token passing for production.
INFO:app.api.websocket:Attempting to connect WebSocket for upload_id: upload_1763771444886_thbu0hbs6, session_id: session_1763771444900_5b36p7gvn
INFO:     127.0.0.1:64234 - "WebSocket /api/ws/progress/upload_1763771444886_thbu0hbs6?session_id=session_1763771444900_5b36p7gvn" [accepted]
INFO:app.services.websocket_service:WebSocket connected: upload_id=upload_1763771444886_thbu0hbs6, session_id=session_1763771444900_5b36p7gvn, timeout=1800s
INFO:     connection open
INFO:app.api.websocket:WebSocket connected successfully for upload_id: upload_1763771444886_thbu0hbs6, session_id: session_1763771444900_5b36p7gvn
INFO:app.api.websocket:Started keepalive task for upload_id=upload_1763771444886_thbu0hbs6
INFO:app.api.new_extract:üìÅ File: 2025.06.pdf, Size: 74848 bytes, Hash: ada8fed3f7804b1c..., User: f6cf1764-5bfc-4352-abd9-81b72b7cf191
INFO:app.api.new_extract:üîç Checking for duplicates BEFORE proceeding with upload...
INFO:app.api.new_extract:‚úÖ No duplicate found - proceeding with upload for file: 2025.06.pdf
INFO:app.api.new_extract:üöÄ Starting extraction: 2025.06.pdf (ID: upload_1763771444886_thbu0hbs6)
INFO:app.services.gcs_utils:‚úÖ File uploaded to GCS: statements/5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68/2025.06.pdf
INFO:app.api.new_extract:‚úÖ Uploaded to GCS: statements/5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68/2025.06.pdf
INFO:app.services.gcs_utils:üîê Generating signed URL for: statements/5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68/2025.06.pdf
INFO:app.services.gcs_utils:üìù Generating signed URL with:
INFO:app.services.gcs_utils:   - Content-Type: application/pdf
INFO:app.services.gcs_utils:   - Content-Disposition: inline
INFO:app.services.gcs_utils:   - Expiration: 1 hour(s)
INFO:app.services.gcs_utils:‚úÖ Generated signed URL for GCS file with inline headers: statements/5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68/2025.06.pdf
INFO:app.services.gcs_utils:   URL expires at: 2025-11-22 01:30:50.787254
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Step started: Uploading Document (Step 1) for upload_id upload_1763771444886_thbu0hbs6
INFO:app.db.crud.environment:‚úÖ Found existing default environment 9f4a7a57-5715-4b1e-98a9-b9901726a485 for user f6cf1764-5bfc-4352-abd9-81b72b7cf191 in company d883a865-a54f-41d6-968e-f94c3cb3f589
INFO:app.api.new_extract:‚úÖ Using user's default environment 9f4a7a57-5715-4b1e-98a9-b9901726a485 for upload consistency
INFO:app.api.new_extract:üìù Upload metadata prepared (NOT saved to DB): 5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68
INFO:app.services.audit_logging_service:Audit: data_view by user f6cf1764-5bfc-4352-abd9-81b72b7cf191 on extraction_process (ID: 5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68)
INFO:app.services.conversational_summary_service:‚úÖ ConversationalSummaryService initialized with GPT-4o
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:‚úÖ Enhanced Extraction Service initialized (OPTIMIZED)
INFO:app.services.enhanced_extraction_service:‚≠ê PRIMARY: GPT-5 Vision - AVAILABLE ‚úì
INFO:app.services.enhanced_extraction_service:   Features: Structured outputs, 60-80% token savings, 99.9% reliability
INFO:app.services.enhanced_extraction_service:üìã FALLBACK services: Lazy-loaded on demand (Claude, Mistral, DocAI, Excel)
INFO:app.services.enhanced_extraction_service:‚è±Ô∏è  Timeout management: {'metadata_extraction': 300, 'document_processing': 600, 'table_extraction': 1200, 'post_processing': 300, 'total_process': 1800}
INFO:app.services.enhanced_extraction_service:üöÄ Enhanced 3-phase pipeline: ENABLED
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:‚úÖ Using GPT-5 Vision as primary extraction service
INFO:app.services.enhanced_extraction_service:‚úÖ GPT5_VISION service validated successfully
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:‚≠ê‚≠ê‚≠ê ROUTING TO GPT-5 VISION EXTRACTION ‚≠ê‚≠ê‚≠ê
INFO:app.services.enhanced_extraction_service:   Extraction Method: smart
INFO:app.services.enhanced_extraction_service:   Features: Structured outputs, token optimization, intelligent page selection
INFO:app.services.enhanced_extraction_service:   File: pdfs/2025.06.pdf
INFO:app.services.enhanced_extraction_service:   NOTE: Function name '_extract_with_claude_progress' is legacy - it USES GPT-5
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Started stage document_processing for upload upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Completed stage document_processing for upload upload_1763771444886_thbu0hbs6
INFO:app.services.enhanced_extraction_service:‚ÑπÔ∏è Carrier from database 'Pinecrestconsulting' has no specific prompt. Continuing detection.
INFO:app.services.enhanced_extraction_service:No carrier match detected inside provided text snippet.
INFO:app.services.enhanced_extraction_service:üîé Detected carrier 'Redirect Health' from contextual text match.
INFO:app.services.enhanced_extraction_service:‚úì Carrier detected from PDF text: Redirect Health
INFO:app.services.enhanced_extraction_service:‚úì Using carrier context for GPT prompts: Redirect Health (options: {'merge_similar_tables': True, 'summary_keywords': ['total', 'grand total', 'subtotal', 'sum', 'broker total', 'group invoices total', 'commission summary'], 'summary_row_templates': ['Group Invoices for Broker Commissions', 'Group ID / Group Name rollups', "Lines that start with 'Total' or end with 'Totals'"], 'expected_rollups': ['Group Total', 'Group Invoices Total', 'Commission Amount Total', 'Allowance Type Total', 'Grand Total'], 'numeric_tolerance_bps': 65, 'row_role_examples': [{'label': 'GroupSummary', 'signature': "Identifier columns blank or show 'Group Total' but dollar columns populated with the sum of above rows."}, {'label': 'AllowanceSummary', 'signature': 'Rows where only the Allowance Type and numeric columns are populated and the numeric values equal the prior block.'}, {'label': 'CarrierSummary', 'signature': 'Rows near the end of a table that restate Invoice Amount, Commissionable Amount, and Commission Amount.'}], 'domain_notes': 'Redirect Health statements bundle 1-2 page tables where writing agent subtotals appear above grand totals. Summary rows frequently blank out the Group ID column but repeat invoice, commissionable, and commission totals.'})
INFO:app.services.enhanced_extraction_service:üì° Emitting extraction step...
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Step started: Analyzing Document (Step 2) for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.enhanced_extraction_service:üì° Emitting table_extraction step...
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Step started: Reading Commission Data (Step 3) for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Started stage table_detection for upload upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.enhanced_extraction_service:‚≠ê Starting GPT-5 Vision extraction for pdfs/2025.06.pdf (enhanced=True)
INFO:app.services.enhanced_extraction_service:   Using structured outputs for 99.9% reliability
INFO:app.services.enhanced_extraction_service:   Token optimization: 60-80% savings via intelligent page selection
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:üöÄ CALLING GPT-5 VISION SERVICE FOR EXTRACTION
INFO:app.services.enhanced_extraction_service:   File: pdfs/2025.06.pdf
INFO:app.services.enhanced_extraction_service:   Carrier: Redirect Health
INFO:app.services.enhanced_extraction_service:   Enhanced Mode: True
INFO:app.services.enhanced_extraction_service:   Max Pages: 100 (intelligent page selection)
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.gpt.enhanced_service:üöÄ Starting enhanced extraction for Redirect Health | upload_1763771452
INFO:app.services.gpt.vision_extractor:üìÑ Processing PDF with direct upload method: pdfs/2025.06.pdf
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.gpt.vision_extractor:üì§ Uploading PDF: pdfs/2025.06.pdf
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/files "HTTP/1.1 200 OK"
INFO:app.services.gpt.vision_extractor:‚úÖ PDF uploaded: file-DtBscHLwgSFJMrjU6Do2cb
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.gpt.dynamic_prompts:üîç GPT: Looking up carrier prompt: 'Redirect Health' ‚Üí normalized: 'redirecthealth'
INFO:app.services.gpt.dynamic_prompts:‚úÖ MATCH FOUND! Using carrier-specific prompt for: Redirect Health
INFO:app.services.gpt.vision_extractor:üìã Applied carrier-specific instructions for Redirect Health
INFO:app.services.gpt.vision_extractor:üìã Extracting from PDF using Responses API (file_id: file-DtBscHLwgSFJMrjU6Do2cb)
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.gpt.vision_extractor:üìä Response length: 11284 characters
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.gpt.vision_extractor:‚úÖ Extraction complete: 3 tables, 10266 tokens, $0.0015
INFO:app.services.gpt.vision_extractor:‚úÖ Document processing complete: 3 tables, $0.0015
INFO:app.services.gpt.monitoring:‚úÖ Extraction success | upload_id=upload_1763771452 | pages=1 | tokens=10266 | cost=$0.0015 | time=64.14s
INFO:app.services.gpt.enhanced_service:‚úÖ Extraction complete: 3 tables, $0.0015, 64.14s
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:‚úÖ GPT-5 VISION SERVICE COMPLETED SUCCESSFULLY
INFO:app.services.enhanced_extraction_service:   Success: True
INFO:app.services.enhanced_extraction_service:   Tables Extracted: 3
INFO:app.services.enhanced_extraction_service:   Tokens Used: 10266
INFO:app.services.enhanced_extraction_service:   Cost: $0.0015
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:‚ö° Transforming GPT-5 Vision results to compatible format
INFO:app.services.enhanced_extraction_service:üìä GPT-5 extraction results:
INFO:app.services.enhanced_extraction_service:   - Tables: 3
INFO:app.services.enhanced_extraction_service:   - Groups/Companies: 20
INFO:app.services.enhanced_extraction_service:   - Writing Agents: 0
INFO:app.services.enhanced_extraction_service:   - Carrier: Redirect Health
INFO:app.services.enhanced_extraction_service:   - Broker: Innovative BPS LLC
INFO:app.services.enhanced_extraction_service:   - Statement Date: 2025-06-30
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.enhanced_extraction_service:üìã GPT-5 carrier/broker extraction ‚Üí carrier='Redirect Health' (0.95) | broker='Innovative BPS LLC' (0.95)
INFO:app.services.enhanced_extraction_service:‚úÖ GPT-5 metadata extracted: carrier=Redirect Health, date=2025-06-30, broker=Innovative BPS LLC
INFO:app.services.enhanced_extraction_service:   Cost: $0.0015, Tokens: 10266
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
üìé Enhanced multi-strategy stitching: Processing 3 tables
üìé Canonical header identified: ['Group ID', 'Group Name', 'Invoice Amount', 'Commissionable Amount', 'Comm. Rate', 'Commission Amount'] (6 columns)
üìé Table 1 headers: ['Group ID', 'Group Name', 'Invoice Amount', 'Commissionable Amount', 'Comm. Rate', 'Commission Amount'] (6 columns)
üìé Table 2 headers: ['Group ID', 'Group Name', 'Invoice Amount', 'Commissionable Amount', 'Allowance Type', 'Commission Amount'] (6 columns)
üìé Table 3 headers: ['Total Invoice Amount', 'Commissionable Amount', 'Commission Amount'] (3 columns)
üìé Found 3 unique header patterns
üìé Fuzzy merge enabled. Attempting to combine similar header groups (threshold=0.8).
üìé Similarity breakdown for tables:
   Header: 0.905
   Column count: 1.000
   Row format: 1.000
   Data pattern: 0.833
   Structure: 0.667
   Final score: 0.913
üìé Fuzzy merge: combining group 1 with 2 (similarity=0.913)
   üîç Smart column splitting detected - using enhanced similarity
   Smart splitting similarity: phrase=0.894, word=0.400, combined=0.746
üìé Similarity breakdown for tables:
   Header: 0.746
   Column count: 0.500
   Row format: 0.500
   Data pattern: 0.333
   Structure: 0.667
   Final score: 0.565
üìé Grouped 3 tables into 2 groups
üìé Merging group 1 with 2 tables
INFO:app.services.extraction_utils:‚úÖ Merged table created: 22 rows (enhancements preserved from individual tables)
üìé Merged table 1: 6 headers, 22 rows
üìé Merged headers: ['Group ID', 'Group Name', 'Invoice Amount', 'Commissionable Amount', 'Comm. Rate', 'Commission Amount']
üìé Merging group 2 with 1 tables
INFO:app.services.extraction_utils:‚úÖ Merged table created: 1 rows (enhancements preserved from individual tables)
üìé Merged table 2: 3 headers, 1 rows
üìé Merged headers: ['Total Invoice Amount', 'Commissionable Amount', 'Commission Amount']
üìé Enhanced stitching completed: 2 final tables
INFO:app.services.extraction_utils:Header normalization: 6 headers normalized
INFO:app.services.enhanced_extraction_service:GPT-5: Verified normalized headers
INFO:app.services.extraction_utils:Header normalization: 3 headers normalized
INFO:app.services.enhanced_extraction_service:GPT-5: Verified normalized headers
INFO:app.services.enhanced_extraction_service:üìä Table 1 summary rows ‚Üí model:1 heuristic:0 final:1
INFO:app.services.enhanced_extraction_service:üìä Table 2 summary rows ‚Üí model:1 heuristic:1 final:1
INFO:app.services.enhanced_extraction_service:   ‚Ü≥ Example reasoning row 0: score=0.55 reasons=['Row annotated as CarrierSummary', 'Row is mostly numeric']
INFO:app.services.enhanced_extraction_service:‚≠ê GPT-5: Processed 3 tables into 2 tables
INFO:app.services.enhanced_extraction_service:   Cost: $0.0015
INFO:app.services.enhanced_extraction_service:   Tokens: 10266
INFO:app.services.enhanced_extraction_service:‚úÖ Using GPT-5's structured output summary row detection
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Completed stage table_detection for upload upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Started stage summary_generation for upload upload_1763771444886_thbu0hbs6
INFO:app.services.conversational_summary_service:üó£Ô∏è Generating conversational summary...
INFO:app.services.conversational_summary_service:üîç _build_summary_prompt called:
INFO:app.services.conversational_summary_service:   - use_enhanced: True
INFO:app.services.conversational_summary_service:   - has_enhanced_data: True
INFO:app.services.conversational_summary_service:‚úÖ Attaching condensed enhanced context to prompt
INFO:app.services.conversational_summary_service:Calculated total from data rows: $162,951.00
INFO:app.services.conversational_summary_service:‚úÖ SUCCESS: Enhanced prompts imported correctly
INFO:app.services.conversational_summary_service:üöÄ Calling GPT-4o API for summary generation...
INFO:app.services.conversational_summary_service:   Model: gpt-4o
INFO:app.services.conversational_summary_service:   Max tokens: 1200
INFO:app.services.conversational_summary_service:   Prompt length: 2806 chars
INFO:app.services.conversational_summary_service:   System prompt length: 1421 chars
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.services.conversational_summary_service:üìä Token usage - Input: 1,036, Output: 286
INFO:app.services.conversational_summary_service:‚úÖ GPT-4o API call successful
INFO:app.services.conversational_summary_service:‚úÖ Detected structured JSON response from GPT-4o
INFO:app.services.conversational_summary_service:üìä GPT-4o provided 11 fields: ['carrier_name', 'broker_company', 'statement_date', 'broker_id', 'payment_type', 'total_amount', 'company_count', 'top_contributors', 'commission_structure', 'census_count', 'billing_periods']
INFO:app.services.conversational_summary_service:‚úÖ Extracted structured summary data (4 fields): ['statement_date', 'total_amount', 'company_count', 'broker_id_confidence']
INFO:app.services.conversational_summary_service:‚úÖ Fallback added 1 missing fields: ['broker_id_confidence']
INFO:app.services.conversational_summary_service:üìÑ Generated summary length: 480 characters
INFO:app.services.conversational_summary_service:üìä Final structured data keys: ['statement_date', 'total_amount', 'company_count', 'broker_id_confidence', 'carrier_name', 'broker_company', 'broker_id', 'payment_type', 'top_contributors', 'commission_structure', 'census_count', 'billing_periods']
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Completed stage summary_generation for upload upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Started stage validation for upload upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: completion
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Completed processing for upload upload_1763771444886_thbu0hbs6 in 71.01 seconds
INFO:app.api.new_extract:‚úÖ Extraction completed successfully
INFO:app.services.cancellation_manager:Cleared cancellation status for upload upload_1763771444886_thbu0hbs6
INFO:app.api.new_extract:üîç Summary row refinement adjusted table 1: [0] ‚Üí []
INFO:app.api.new_extract:‚úÖ Extraction completed (data NOT saved to DB, will be saved on approval)
INFO:app.services.audit_logging_service:Audit: data_view by user f6cf1764-5bfc-4352-abd9-81b72b7cf191 on extraction_complete (ID: 5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68)
INFO:app.api.new_extract:üéØ Format Learning: Using carrier Redirect Health with ID 8340174b-f6ed-42eb-976d-4868bb06c844
WARNING:app.api.new_extract:üö® CARRIER MISMATCH DETECTED: File uploaded to d883a865-a54f-41d6-968e-f94c3cb3f589 but extracted as Redirect Health (8340174b-f6ed-42eb-976d-4868bb06c844)
INFO:app.api.new_extract:üîÑ Reassigning file to correct carrier: Redirect Health
INFO:app.services.gcs_utils:‚úÖ File copied in GCS: statements/5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68/2025.06.pdf -> statements/8340174b-f6ed-42eb-976d-4868bb06c844/2025.06.pdf
INFO:app.services.gcs_utils:‚úÖ File deleted from GCS: statements/5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68/2025.06.pdf
INFO:app.services.gcs_utils:üîê Generating signed URL for: statements/8340174b-f6ed-42eb-976d-4868bb06c844/2025.06.pdf
INFO:app.services.gcs_utils:üìù Generating signed URL with:
INFO:app.services.gcs_utils:   - Content-Type: application/pdf
INFO:app.services.gcs_utils:   - Content-Disposition: inline
INFO:app.services.gcs_utils:   - Expiration: 1 hour(s)
INFO:app.services.gcs_utils:‚úÖ Generated signed URL for GCS file with inline headers: statements/8340174b-f6ed-42eb-976d-4868bb06c844/2025.06.pdf
INFO:app.services.gcs_utils:   URL expires at: 2025-11-22 01:32:05.809437
INFO:app.api.new_extract:‚úÖ File moved to correct carrier folder in GCS: statements/8340174b-f6ed-42eb-976d-4868bb06c844/2025.06.pdf
INFO:app.api.new_extract:‚úÖ Updated upload metadata: carrier_id=8340174b-f6ed-42eb-976d-4868bb06c844, company_id stays as user's company=d883a865-a54f-41d6-968e-f94c3cb3f589
INFO:app.api.new_extract:üîç Multiple tables detected (2), analyzing for field mapping suitability
INFO:app.api.new_extract:   Table 0: type=, rows=22, score=87
INFO:app.api.new_extract:   Table 1: type=, rows=1, score=61
INFO:app.api.new_extract:üéØ INTELLIGENT SELECTION: Using table 0 for field mapping
INFO:app.api.new_extract:   Reasoning: Selected table 0 (table_type=, rows=22, commission_headers=3, score=87)
INFO:app.api.new_extract:üéØ Using table 0 for field mapping with 6 headers
üéØ FormatLearningService: Finding matching format for company 8340174b-f6ed-42eb-976d-4868bb06c844
üéØ FormatLearningService: Headers: ['Group ID', 'Group Name', 'Invoice Amount', 'Commissionable Amount', 'Comm. Rate', 'Commission Amount']
üéØ FormatLearningService: Table structure: {'row_count': 22, 'column_count': 6, 'has_financial_data': True}
üéØ FormatLearningService: Headers type: <class 'list'>
üéØ FormatLearningService: Headers length: 6
üéØ CRUD: Finding best matching format for company 8340174b-f6ed-42eb-976d-4868bb06c844
üéØ CRUD: Input headers: ['Group ID', 'Group Name', 'Invoice Amount', 'Commissionable Amount', 'Comm. Rate', 'Commission Amount']
üéØ CRUD: Input table structure: {'row_count': 22, 'column_count': 6, 'has_financial_data': True}
üéØ CRUD: Found 1 saved formats for company
üéØ CRUD: Comparing with saved format:
üéØ CRUD:   Saved headers: ['Group ID', 'Group Name', 'Invoice Amount', 'Commissionable Amount', 'Comm. Rate', 'Commission Amount']
üéØ CRUD:   Header similarity: 0.8
üéØ CRUD:   Structure similarity: 1.0
üéØ CRUD:   Total score: 0.8400000000000001
üéØ CRUD:   -> New best match with score 0.8400000000000001
üéØ FormatLearningService: Best match score: 0.8400000000000001
üéØ FormatLearningService: Found matching format with signature: f0d2424f7efd76c2fcfb224d0246d1f1
üéØ FormatLearningService: Learned field mapping: {'Group ID': 'Policy Number', 'Comm. Rate': 'Commission Rate', 'Group Name': 'Client Name', 'Invoice Amount': 'Invoice Total', 'Commission Amount': 'Commission Earned', 'Commissionable Amount': 'Premium Total'}
üéØ FormatLearningService: Learned table editor settings: {'headers': ['Group ID', 'Group Name', 'Invoice Amount', 'Commissionable Amount', 'Comm. Rate', 'Commission Amount'], 'summary_rows': [], 'corrected_carrier_name': '', 'corrected_statement_date': '2025-10-31', 'user_corrections': {'carrier_name': '', 'statement_date': '2025-10-31'}}
INFO:app.api.new_extract:üéØ Format Learning: Found matching format with score 0.8400000000000001
INFO:app.api.new_extract:üéØ Format Learning: Skipping statement date auto-apply (dates are document-specific)
INFO:app.api.new_extract:‚úÖ Total extracted from document_metadata: $9343.30
WARNING:app.api.new_extract:‚ö†Ô∏è Replacing total_amount 9343.30 (method=document_metadata) with summary_row_scan=13294.00
WARNING:app.api.new_extract:‚ö†Ô∏è Total discrepancy detected: summary 13294.00 vs detail 162951.00 (Œî=149657.00, 1125.75%)
INFO:app.api.new_extract:üìä Added total to document_metadata: $13294.00 (method: summary_row_scan)
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Step started: Understanding Structure (Step 4) for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.ai_plan_type_detection_service:AI Plan Type Detection Service initialized successfully
INFO:app.api.new_extract:üîç AI Plan Type Detection: Detecting plan types during extraction
INFO:app.services.ai_plan_type_detection_service:üîç AI Plan Detection: Analyzing document for insurance plan types
INFO:httpx:HTTP Request: POST https://api.mistral.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.services.ai_plan_type_detection_service:‚úÖ AI successfully detected plan types
INFO:app.services.ai_plan_type_detection_service:‚úÖ AI Plan Detection: Found 1 plan types with 0.90 confidence
INFO:app.api.new_extract:‚úÖ AI Plan Detection: 1 plan types with 0.90 confidence
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Step started: AI Field Mapping (Step 5) for upload_id upload_1763771444886_thbu0hbs6
INFO:app.api.new_extract:üß† AI Field Mapping: Starting field mapping during extraction
INFO:app.api.new_extract:üìã Normalizing headers for AI mapping:
INFO:app.api.ai_intelligent_mapping:üöÄ Enhanced AI Analysis Request: User muhammad@pinecrestconsulting.com
INFO:app.services.ai_field_mapping_service:ü§ñ AI Mapping: Analyzing 6 headers with AI intelligence
INFO:app.services.ai_field_mapping_service:üîç AI Mapping: carrier_id provided: True (value: 8340174b-f6ed-42eb-976d-4868bb06c844)
INFO:app.services.ai_field_mapping_service:üéØ Carrier ID is valid, attempting to retrieve learned mapping for carrier 8340174b-f6ed-42eb-976d-4868bb06c844
INFO:app.services.ai_field_mapping_service:üîç Generated format signature for lookup: f0d2424f7efd76c2fcfb224d0246d1f1
INFO:app.services.ai_field_mapping_service:üîç Looking up learned format for carrier 8340174b-f6ed-42eb-976d-4868bb06c844 with 6 headers
INFO:app.services.ai_field_mapping_service:‚úÖ Found EXACT match for learned format with signature f0d2424f7efd76c2fcfb224d0246d1f1
INFO:app.services.ai_field_mapping_service:‚úÖ Learned field mapping has 6 mappings
INFO:app.services.ai_field_mapping_service:üéØ Found learned mapping for carrier with 1.00 confidence
INFO:app.services.ai_field_mapping_service:üéØ Using learned mappings directly with match score 1.0
INFO:app.services.ai_field_mapping_service:‚úÖ Learned field_mapping contains 6 mappings
INFO:app.services.ai_field_mapping_service:‚úÖ Applied 6 learned mappings directly - returning early
INFO:app.services.ai_field_mapping_service:‚úÖ Response includes learned_format_used=True flag
INFO:app.services.ai_plan_type_detection_service:üîç AI Plan Detection: Analyzing document for insurance plan types
INFO:httpx:HTTP Request: POST https://api.mistral.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.services.ai_plan_type_detection_service:‚úÖ AI successfully detected plan types
INFO:app.services.ai_plan_type_detection_service:‚úÖ AI Plan Detection: Found 1 plan types with 0.90 confidence
INFO:app.api.ai_intelligent_mapping:‚úÖ Enhanced AI Analysis Complete: Overall confidence 0.93
INFO:app.api.new_extract:‚úÖ AI Field Mapping: 6 mappings with sample data, confidence 0.95
INFO:app.api.new_extract:‚úÖ Conversational summary supplied by extraction pipeline
INFO:app.api.new_extract:   Summary preview: This is a commission statement from Redirect Health, dated June 30, 2025. Although the broker's identity remains unknown, the statement reflects a total commission amount of $9,343.30. It highlights p
INFO:app.api.new_extract:   Structured data keys: ['statement_date', 'total_amount', 'company_count', 'broker_id_confidence', 'carrier_name', 'broker_company', 'broker_id', 'payment_type', 'top_contributors', 'commission_structure', 'census_count', 'billing_periods']
INFO:app.services.audit_logging_service:Audit: file_upload by user f6cf1764-5bfc-4352-abd9-81b72b7cf191 on statement_upload (ID: 5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68)
INFO:app.api.new_extract:üì§ Sending pre-generated enhanced summary via WebSocket...
INFO:app.api.new_extract:üìä Sending structured data: {"statement_date": "2025-06-30", "total_amount": "9343.30", "company_count": 13, "broker_id_confidence": 0.7, "carrier_name": "Redirect Health", "broker_company": "Unknown", "broker_id": "null", "paym...
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Step started: Preparing Results (Step 6) for upload_id upload_1763771444886_thbu0hbs6
INFO:app.api.new_extract:üìä Calculating invoice total from 2 tables
INFO:app.api.new_extract:üìä Table 0: Found invoice column at index 2: 'Invoice Amount'
INFO:app.api.new_extract:‚úÖ Table 0: Calculated from rows: $331,022.00
INFO:app.api.new_extract:üìä Table 1: Found invoice column at index 0: 'Total Invoice Amount'
INFO:app.api.new_extract:‚úÖ Table 1: Calculated from rows: $103,457.00
INFO:app.api.new_extract:‚úÖ TOTAL invoice amount from all tables: $434,479.00
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1763771444886_thbu0hbs6: EXTRACTION_COMPLETE
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1763771444886_thbu0hbs6
INFO:app.services.websocket_service:Extraction complete for upload_id upload_1763771444886_thbu0hbs6
INFO:app.api.new_extract:‚úÖ Extraction complete! Sent results via WebSocket for upload_id: upload_1763771444886_thbu0hbs6
INFO:     connection closed
INFO:app.api.websocket:WebSocket disconnected: upload_id=upload_1763771444886_thbu0hbs6, session_id=session_1763771444900_5b36p7gvn
INFO:app.services.websocket_service:WebSocket disconnected: upload_id=upload_1763771444886_thbu0hbs6, session_id=session_1763771444900_5b36p7gvn
INFO:app.api.websocket:WebSocket cleanup completed for upload_id=upload_1763771444886_thbu0hbs6
INFO:     127.0.0.1:64236 - "POST /api/extract-tables-smart/ HTTP/1.1" 200 OK
INFO:app.api.pdf_proxy:üîÑ Proxying PDF from: https://storage.googleapis.com/pdf_extraction_files_saver/statements/8340174b-f6ed-42eb-976d-4868bb0...
INFO:httpx:HTTP Request: GET https://storage.googleapis.com/pdf_extraction_files_saver/statements/8340174b-f6ed-42eb-976d-4868bb06c844/2025.06.pdf?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=docsai-table-extractor%40pdf-tables-extractor-465009.iam.gserviceaccount.com%2F20251122%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20251122T003205Z&X-Goog-Expires=3599&X-Goog-SignedHeaders=host&response-content-disposition=inline&response-content-type=application%2Fpdf&X-Goog-Signature=23046ade6a5a29c50140a62ec6b1f0d3a2b758d09bceea1c186329b88c961683f8388f4e2f2f2531492f7f897e08f1454d527fed0c4dbbf3191fd09a71411ab3be065988efc5d8cf8c30170ca9812ef5e9b6d98c9d649e4e423a6870d23b260166613b2628bd1ce1b17dd3e69ab2fa8669c1213ec7d885a93a985f9cf93341e91ce49dfb6f24e7b5da7dc941227afdb0b15c595ab7db885686c506176c633b1a46deff313aac74347359408d214d83254fa611d75b20afcaaecc055abcfb1f65a563732d28b1d840027fb557c7110db13d59ffae95801e4ada31a2544e1b63d936544767b9a3c45506ca05ce1b53fadcf267b8a0030ced3d77f9801d8c1176a6 "HTTP/1.1 200 OK"
INFO:     127.0.0.1:64629 - "GET /api/pdf-proxy?url=https%3A%2F%2Fstorage.googleapis.com%2Fpdf_extraction_files_saver%2Fstatements%2F8340174b-f6ed-42eb-976d-4868bb06c844%2F2025.06.pdf%3FX-Goog-Algorithm%3DGOOG4-RSA-SHA256%26X-Goog-Credential%3Ddocsai-table-extractor%2540pdf-tables-extractor-465009.iam.gserviceaccount.com%252F20251122%252Fauto%252Fstorage%252Fgoog4_request%26X-Goog-Date%3D20251122T003205Z%26X-Goog-Expires%3D3599%26X-Goog-SignedHeaders%3Dhost%26response-content-disposition%3Dinline%26response-content-type%3Dapplication%252Fpdf%26X-Goog-Signature%3D23046ade6a5a29c50140a62ec6b1f0d3a2b758d09bceea1c186329b88c961683f8388f4e2f2f2531492f7f897e08f1454d527fed0c4dbbf3191fd09a71411ab3be065988efc5d8cf8c30170ca9812ef5e9b6d98c9d649e4e423a6870d23b260166613b2628bd1ce1b17dd3e69ab2fa8669c1213ec7d885a93a985f9cf93341e91ce49dfb6f24e7b5da7dc941227afdb0b15c595ab7db885686c506176c633b1a46deff313aac74347359408d214d83254fa611d75b20afcaaecc055abcfb1f65a563732d28b1d840027fb557c7110db13d59ffae95801e4ada31a2544e1b63d936544767b9a3c45506ca05ce1b53fadcf267b8a0030ced3d77f9801d8c1176a6 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64626 - "GET /api/pending/progress/5cd02a5f-cbc8-48a2-bd5a-ba3fe223dc68/table_editor HTTP/1.1" 200 OK
INFO:app.services.orphan_cleanup_service:üßπ Starting orphan cleanup job...
INFO:app.services.orphan_cleanup_service:‚úÖ Orphan cleanup completed: no orphans found
INFO:app.services.orphan_cleanup_service:üßπ Starting orphan cleanup job...
INFO:app.services.orphan_cleanup_service:‚úÖ Orphan cleanup completed: no orphans found
INFO:app.services.orphan_cleanup_service:üßπ Starting orphan cleanup job...
INFO:app.services.orphan_cleanup_service:‚úÖ Orphan cleanup completed: no orphans found
INFO:app.services.orphan_cleanup_service:üßπ Starting orphan cleanup job...
INFO:app.services.orphan_cleanup_service:‚úÖ Orphan cleanup completed: no orphans found