(base) kayttaja@Kayttajas-MacBook-Pro server % source venv/bin/activ
ate
(venv) (base) kayttaja@Kayttajas-MacBook-Pro server % uvicorn app.ma
in:app --reload
INFO:     Will watch for changes in these directories: ['/Users/kayttaja/Desktop/commision-tracker/server']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [12996] using StatReload
âœ… Using Render PostgreSQL database
âœ… Using Render PostgreSQL database
INFO:app.services.company_name_service:spaCy not available, using pattern matching only
INFO:app.services.gpt4o_vision_service:GPT-5 Vision service initialized successfully
INFO:app.services.ai_field_mapping_service:AI Field Mapping Service initialized successfully
INFO:app.services.ai_plan_type_detection_service:AI Plan Type Detection Service initialized successfully
ğŸŒ CORS Configuration - Allowed Origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'https://commission-tracker-1.onrender.com', 'https://commission-tracker-ochre.vercel.app']
INFO:     Started server process [12998]
INFO:     Waiting for application startup.
INFO:app.services.process_monitor:Process monitor initialized: max_time=1800s, heartbeat_timeout=300s
INFO:app.services.process_monitor:Process monitoring started
INFO:app.main:Process monitoring started for large file processing
INFO:app.main:Application startup complete with enhanced monitoring
INFO:app.services.process_monitor:Starting process monitoring loop
INFO:     Application startup complete.
INFO:     127.0.0.1:58598 - "OPTIONS /environments HTTP/1.1" 200 OK
INFO:app.main:Cleaned up 443 expired/inactive sessions
INFO:     127.0.0.1:58626 - "GET /api/dashboard/earned-commissions?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58630 - "GET /api/earned-commission/companies-aggregated?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58595 - "GET /api/earned-commission/stats?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58600 - "GET /api/dashboard/stats?view_mode=my_data HTTP/1.1" 200 OK
INFO:     127.0.0.1:58632 - "GET /api/earned-commission/carriers-detailed?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58626 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:58628 - "GET /api/earned-commission/carriers HTTP/1.1" 200 OK
INFO:     127.0.0.1:58630 - "GET /environments HTTP/1.1" 200 OK
INFO:     127.0.0.1:58595 - "GET /api/earned-commission/stats?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58600 - "GET /api/dashboard/stats?view_mode=my_data HTTP/1.1" 200 OK
INFO:     127.0.0.1:58632 - "GET /api/dashboard/earned-commissions?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58626 - "GET /api/earned-commission/carriers HTTP/1.1" 200 OK
INFO:     127.0.0.1:58628 - "GET /api/earned-commission/carriers-detailed?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58595 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:58630 - "GET /api/earned-commission/companies-aggregated?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62517 - "OPTIONS /api/auth/otp/request HTTP/1.1" 200 OK
âš ï¸ Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.
âš ï¸ OTP service will use database-only mode
âœ… OTP email sent to muhammad@pinecrestconsulting.com
INFO:app.services.audit_logging_service:Audit: logout by user 8bce7481-3cbb-48d6-87ae-fad8ffa16d1c on user_authentication
INFO:     127.0.0.1:62519 - "POST /api/auth/otp/request HTTP/1.1" 200 OK
INFO:     127.0.0.1:62704 - "OPTIONS /api/auth/otp/verify HTTP/1.1" 200 OK
ğŸª Setting cookies for user muhammad@pinecrestconsulting.com
ğŸª Request origin: http://localhost:3000
ğŸª Request host: localhost:8000
ğŸª Request URL: http://localhost:8000/api/auth/otp/verify
ğŸª Request scheme: http
ğŸª Response object type: <class 'starlette.responses.Response'>
ğŸª Response has set_cookie method: True
ğŸª Response headers before: {}
ğŸª Response status code: None
ğŸª Environment variables:
ğŸª   ENVIRONMENT: not_set
ğŸª   NODE_ENV: not_set
ğŸª   RENDER: not_set
ğŸª   PORT: not_set
ğŸª HTTPS Detection:
ğŸª   request.url.scheme: http
ğŸª   x-forwarded-proto: not_set
ğŸª   x-forwarded-ssl: not_set
ğŸª   x-forwarded-scheme: not_set
ğŸª   Final is_https: False
ğŸª Environment check: is_production=False, is_render=False, is_https=False
ğŸª Cross-origin check: origin=http://localhost:3000, host=localhost:8000, origin_domain=localhost:3000, is_cross_origin=True
ğŸª Using samesite=lax
âš ï¸  Local development cross-origin detected - using samesite=lax (samesite=none requires HTTPS)
ğŸª Setting cookie: access_token with samesite=lax, secure=False
ğŸª Using local development cookie settings for access_token
ğŸª Cookie access_token set successfully
ğŸª Set-Cookie headers for access_token: ['access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNmNmMTc2NC01YmZjLTQzNTItYWJkOS04MWI3MmI3Y2YxOTEiLCJlbWFpbCI6Im11aGFtbWFkQHBpbmVjcmVzdGNvbnN1bHRpbmcuY29tIiwicm9sZSI6ImFkbWluIiwiY29tcGFueV9pZCI6Ijg2MzliZTVhLWJhMjItNGViOC1iMTIzLTYxYmJjMGUxNmFiOSIsImFjY2Vzc19sZXZlbCI6ImJhc2ljIiwiZXhwIjoxNzYyNTM4NDAxLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYyNTM0ODAxLCJqdGkiOiIzYzVhNDcxOThiNjc3MmQzNjc1YmZiMWU0MTc3YTMwYyJ9.ev_y05zOSG4i2z_BGY8mTBG1mZVFLh8rwHPa4yh7a4o; HttpOnly; Max-Age=3600; Path=/; SameSite=lax']
ğŸª Environment variables:
ğŸª   ENVIRONMENT: not_set
ğŸª   NODE_ENV: not_set
ğŸª   RENDER: not_set
ğŸª   PORT: not_set
ğŸª HTTPS Detection:
ğŸª   request.url.scheme: http
ğŸª   x-forwarded-proto: not_set
ğŸª   x-forwarded-ssl: not_set
ğŸª   x-forwarded-scheme: not_set
ğŸª   Final is_https: False
ğŸª Environment check: is_production=False, is_render=False, is_https=False
ğŸª Cross-origin check: origin=http://localhost:3000, host=localhost:8000, origin_domain=localhost:3000, is_cross_origin=True
ğŸª Using samesite=lax
âš ï¸  Local development cross-origin detected - using samesite=lax (samesite=none requires HTTPS)
ğŸª Setting cookie: refresh_token with samesite=lax, secure=False
ğŸª Using local development cookie settings for refresh_token
ğŸª Cookie refresh_token set successfully
ğŸª Set-Cookie headers for refresh_token: ['access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNmNmMTc2NC01YmZjLTQzNTItYWJkOS04MWI3MmI3Y2YxOTEiLCJlbWFpbCI6Im11aGFtbWFkQHBpbmVjcmVzdGNvbnN1bHRpbmcuY29tIiwicm9sZSI6ImFkbWluIiwiY29tcGFueV9pZCI6Ijg2MzliZTVhLWJhMjItNGViOC1iMTIzLTYxYmJjMGUxNmFiOSIsImFjY2Vzc19sZXZlbCI6ImJhc2ljIiwiZXhwIjoxNzYyNTM4NDAxLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYyNTM0ODAxLCJqdGkiOiIzYzVhNDcxOThiNjc3MmQzNjc1YmZiMWU0MTc3YTMwYyJ9.ev_y05zOSG4i2z_BGY8mTBG1mZVFLh8rwHPa4yh7a4o; HttpOnly; Max-Age=3600; Path=/; SameSite=lax']
ğŸª Environment variables:
ğŸª   ENVIRONMENT: not_set
ğŸª   NODE_ENV: not_set
ğŸª   RENDER: not_set
ğŸª   PORT: not_set
ğŸª HTTPS Detection:
ğŸª   request.url.scheme: http
ğŸª   x-forwarded-proto: not_set
ğŸª   x-forwarded-ssl: not_set
ğŸª   x-forwarded-scheme: not_set
ğŸª   Final is_https: False
ğŸª Environment check: is_production=False, is_render=False, is_https=False
ğŸª Cross-origin check: origin=http://localhost:3000, host=localhost:8000, origin_domain=localhost:3000, is_cross_origin=True
ğŸª Using samesite=lax
âš ï¸  Local development cross-origin detected - using samesite=lax (samesite=none requires HTTPS)
ğŸª Setting cookie: session_token with samesite=lax, secure=False
ğŸª Using local development cookie settings for session_token
ğŸª Cookie session_token set successfully
ğŸª Set-Cookie headers for session_token: ['access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNmNmMTc2NC01YmZjLTQzNTItYWJkOS04MWI3MmI3Y2YxOTEiLCJlbWFpbCI6Im11aGFtbWFkQHBpbmVjcmVzdGNvbnN1bHRpbmcuY29tIiwicm9sZSI6ImFkbWluIiwiY29tcGFueV9pZCI6Ijg2MzliZTVhLWJhMjItNGViOC1iMTIzLTYxYmJjMGUxNmFiOSIsImFjY2Vzc19sZXZlbCI6ImJhc2ljIiwiZXhwIjoxNzYyNTM4NDAxLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYyNTM0ODAxLCJqdGkiOiIzYzVhNDcxOThiNjc3MmQzNjc1YmZiMWU0MTc3YTMwYyJ9.ev_y05zOSG4i2z_BGY8mTBG1mZVFLh8rwHPa4yh7a4o; HttpOnly; Max-Age=3600; Path=/; SameSite=lax']
ğŸª Cookies set successfully
ğŸª Response headers after setting cookies: {'set-cookie': 'access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNmNmMTc2NC01YmZjLTQzNTItYWJkOS04MWI3MmI3Y2YxOTEiLCJlbWFpbCI6Im11aGFtbWFkQHBpbmVjcmVzdGNvbnN1bHRpbmcuY29tIiwicm9sZSI6ImFkbWluIiwiY29tcGFueV9pZCI6Ijg2MzliZTVhLWJhMjItNGViOC1iMTIzLTYxYmJjMGUxNmFiOSIsImFjY2Vzc19sZXZlbCI6ImJhc2ljIiwiZXhwIjoxNzYyNTM4NDAxLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYyNTM0ODAxLCJqdGkiOiIzYzVhNDcxOThiNjc3MmQzNjc1YmZiMWU0MTc3YTMwYyJ9.ev_y05zOSG4i2z_BGY8mTBG1mZVFLh8rwHPa4yh7a4o; HttpOnly; Max-Age=3600; Path=/; SameSite=lax'}
INFO:app.services.audit_logging_service:Audit: logout by user f6cf1764-5bfc-4352-abd9-81b72b7cf191 on user_authentication
INFO:     127.0.0.1:62706 - "POST /api/auth/otp/verify HTTP/1.1" 200 OK
INFO:     127.0.0.1:62735 - "OPTIONS /environments HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /environments HTTP/1.1" 200 OK
INFO:     127.0.0.1:62748 - "GET /api/earned-commission/carriers HTTP/1.1" 200 OK
ğŸ” Debug - All cookies received: ['__next_hmr_refresh_hash__', 'access_token', 'refresh_token', 'session_token']
ğŸ” Debug - Access token present: True
INFO:     127.0.0.1:62750 - "GET /api/earned-commission/carriers-detailed?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62746 - "GET /api/dashboard/earned-commissions?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62742 - "GET /api/earned-commission/stats?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62744 - "GET /api/dashboard/stats?view_mode=my_data&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62748 - "GET /api/auth/permissions HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /api/earned-commission/companies-aggregated?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62750 - "GET /api/earned-commission/carriers HTTP/1.1" 200 OK
INFO:     127.0.0.1:62746 - "GET /api/earned-commission/carriers-detailed?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62742 - "GET /api/dashboard/earned-commissions?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62744 - "GET /api/earned-commission/stats?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62748 - "GET /api/dashboard/stats?view_mode=my_data&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /api/earned-commission/companies-aggregated?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
WARNING:app.api.websocket:WebSocket connection without explicit token for upload_id=upload_1762534835960_9juu9tf2m. This is allowed for progress tracking, but consider implementing token passing for production.
INFO:app.api.websocket:Attempting to connect WebSocket for upload_id: upload_1762534835960_9juu9tf2m, session_id: session_1762534835990_g6zwtwaf8
INFO:     127.0.0.1:62880 - "WebSocket /api/ws/progress/upload_1762534835960_9juu9tf2m?session_id=session_1762534835990_g6zwtwaf8" [accepted]
INFO:app.services.websocket_service:WebSocket connected: upload_id=upload_1762534835960_9juu9tf2m, session_id=session_1762534835990_g6zwtwaf8, timeout=1800s
INFO:     connection open
INFO:app.api.websocket:WebSocket connected successfully for upload_id: upload_1762534835960_9juu9tf2m, session_id: session_1762534835990_g6zwtwaf8
INFO:app.api.websocket:Started keepalive task for upload_id=upload_1762534835960_9juu9tf2m
INFO:     127.0.0.1:62882 - "OPTIONS /api/extract-tables-smart/ HTTP/1.1" 200 OK
INFO:app.api.new_extract:ğŸ“ File: 01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:ğŸ”‘ Hash: 725348b8b20e1e6c7e089eba26510d580aab46dec4230160465fc0968f72808a
INFO:app.api.new_extract:ğŸ“ Size: 168912 bytes
INFO:app.api.new_extract:ğŸ‘¤ User: f6cf1764-5bfc-4352-abd9-81b72b7cf191
INFO:app.services.duplicate_detection_service:ğŸ” Checking for user duplicates - Hash: 725348b8b20e1e6c7e089eba26510d580aab46dec4230160465fc0968f72808a, User: f6cf1764-5bfc-4352-abd9-81b72b7cf191
INFO:app.services.duplicate_detection_service:ğŸ“š Recent uploads for user:
INFO:app.services.duplicate_detection_service:  - statements/607ba6c6-2ecf-4966-b7ad-0aad2d2f4a21/8.6.2025.pdf: hash=328b73e57c101b42..., status=approved
INFO:app.services.duplicate_detection_service:  - statements/1835b956-6811-4060-b99f-18f87157fa9b/01.13.2025.2 Allied Innovative Payment.pdf: hash=3e2ff2652f27d527..., status=Approved
INFO:app.services.duplicate_detection_service:âŒ No duplicate found for hash: 725348b8b20e1e6c7e089eba26510d580aab46dec4230160465fc0968f72808a
INFO:app.api.new_extract:ğŸš€ Starting extract-tables-smart for file: 01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:ğŸ“ File path: pdfs/01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:ğŸ“Š File size: 168912 bytes
INFO:app.api.new_extract:ğŸ†” Upload ID: upload_1762534835960_9juu9tf2m
INFO:app.api.new_extract:ğŸ’¾ Saving uploaded file...
INFO:app.api.new_extract:âœ… File saved successfully
INFO:app.api.new_extract:ğŸ“¤ Uploading file to GCS: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.gcs_utils:âœ… File uploaded to GCS: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:âœ… Successfully uploaded and verified file in GCS: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.gcs_utils:âœ… Generated signed URL for GCS file with inline headers: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Step started: Uploading Document (Step 1) for upload_id upload_1762534835960_9juu9tf2m


(base) kayttaja@Kayttajas-MacBook-Pro server % source venv/bin/activ
ate
(venv) (base) kayttaja@Kayttajas-MacBook-Pro server % uvicorn app.ma
in:app --reload
INFO:     Will watch for changes in these directories: ['/Users/kayttaja/Desktop/commision-tracker/server']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [12996] using StatReload
âœ… Using Render PostgreSQL database
âœ… Using Render PostgreSQL database
INFO:app.services.company_name_service:spaCy not available, using pattern matching only
INFO:app.services.gpt4o_vision_service:GPT-5 Vision service initialized successfully
INFO:app.services.ai_field_mapping_service:AI Field Mapping Service initialized successfully
INFO:app.services.ai_plan_type_detection_service:AI Plan Type Detection Service initialized successfully
ğŸŒ CORS Configuration - Allowed Origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'https://commission-tracker-1.onrender.com', 'https://commission-tracker-ochre.vercel.app']
INFO:     Started server process [12998]
INFO:     Waiting for application startup.
INFO:app.services.process_monitor:Process monitor initialized: max_time=1800s, heartbeat_timeout=300s
INFO:app.services.process_monitor:Process monitoring started
INFO:app.main:Process monitoring started for large file processing
INFO:app.main:Application startup complete with enhanced monitoring
INFO:app.services.process_monitor:Starting process monitoring loop
INFO:     Application startup complete.
INFO:     127.0.0.1:58598 - "OPTIONS /environments HTTP/1.1" 200 OK
INFO:app.main:Cleaned up 443 expired/inactive sessions
INFO:     127.0.0.1:58626 - "GET /api/dashboard/earned-commissions?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58630 - "GET /api/earned-commission/companies-aggregated?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58595 - "GET /api/earned-commission/stats?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58600 - "GET /api/dashboard/stats?view_mode=my_data HTTP/1.1" 200 OK
INFO:     127.0.0.1:58632 - "GET /api/earned-commission/carriers-detailed?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58626 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:58628 - "GET /api/earned-commission/carriers HTTP/1.1" 200 OK
INFO:     127.0.0.1:58630 - "GET /environments HTTP/1.1" 200 OK
INFO:     127.0.0.1:58595 - "GET /api/earned-commission/stats?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58600 - "GET /api/dashboard/stats?view_mode=my_data HTTP/1.1" 200 OK
INFO:     127.0.0.1:58632 - "GET /api/dashboard/earned-commissions?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58626 - "GET /api/earned-commission/carriers HTTP/1.1" 200 OK
INFO:     127.0.0.1:58628 - "GET /api/earned-commission/carriers-detailed?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58595 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:58630 - "GET /api/earned-commission/companies-aggregated?view_mode=my_data&year=2025 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62517 - "OPTIONS /api/auth/otp/request HTTP/1.1" 200 OK
âš ï¸ Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.
âš ï¸ OTP service will use database-only mode
âœ… OTP email sent to muhammad@pinecrestconsulting.com
INFO:app.services.audit_logging_service:Audit: logout by user 8bce7481-3cbb-48d6-87ae-fad8ffa16d1c on user_authentication
INFO:     127.0.0.1:62519 - "POST /api/auth/otp/request HTTP/1.1" 200 OK
INFO:     127.0.0.1:62704 - "OPTIONS /api/auth/otp/verify HTTP/1.1" 200 OK
ğŸª Setting cookies for user muhammad@pinecrestconsulting.com
ğŸª Request origin: http://localhost:3000
ğŸª Request host: localhost:8000
ğŸª Request URL: http://localhost:8000/api/auth/otp/verify
ğŸª Request scheme: http
ğŸª Response object type: <class 'starlette.responses.Response'>
ğŸª Response has set_cookie method: True
ğŸª Response headers before: {}
ğŸª Response status code: None
ğŸª Environment variables:
ğŸª   ENVIRONMENT: not_set
ğŸª   NODE_ENV: not_set
ğŸª   RENDER: not_set
ğŸª   PORT: not_set
ğŸª HTTPS Detection:
ğŸª   request.url.scheme: http
ğŸª   x-forwarded-proto: not_set
ğŸª   x-forwarded-ssl: not_set
ğŸª   x-forwarded-scheme: not_set
ğŸª   Final is_https: False
ğŸª Environment check: is_production=False, is_render=False, is_https=False
ğŸª Cross-origin check: origin=http://localhost:3000, host=localhost:8000, origin_domain=localhost:3000, is_cross_origin=True
ğŸª Using samesite=lax
âš ï¸  Local development cross-origin detected - using samesite=lax (samesite=none requires HTTPS)
ğŸª Setting cookie: access_token with samesite=lax, secure=False
ğŸª Using local development cookie settings for access_token
ğŸª Cookie access_token set successfully
ğŸª Set-Cookie headers for access_token: ['access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNmNmMTc2NC01YmZjLTQzNTItYWJkOS04MWI3MmI3Y2YxOTEiLCJlbWFpbCI6Im11aGFtbWFkQHBpbmVjcmVzdGNvbnN1bHRpbmcuY29tIiwicm9sZSI6ImFkbWluIiwiY29tcGFueV9pZCI6Ijg2MzliZTVhLWJhMjItNGViOC1iMTIzLTYxYmJjMGUxNmFiOSIsImFjY2Vzc19sZXZlbCI6ImJhc2ljIiwiZXhwIjoxNzYyNTM4NDAxLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYyNTM0ODAxLCJqdGkiOiIzYzVhNDcxOThiNjc3MmQzNjc1YmZiMWU0MTc3YTMwYyJ9.ev_y05zOSG4i2z_BGY8mTBG1mZVFLh8rwHPa4yh7a4o; HttpOnly; Max-Age=3600; Path=/; SameSite=lax']
ğŸª Environment variables:
ğŸª   ENVIRONMENT: not_set
ğŸª   NODE_ENV: not_set
ğŸª   RENDER: not_set
ğŸª   PORT: not_set
ğŸª HTTPS Detection:
ğŸª   request.url.scheme: http
ğŸª   x-forwarded-proto: not_set
ğŸª   x-forwarded-ssl: not_set
ğŸª   x-forwarded-scheme: not_set
ğŸª   Final is_https: False
ğŸª Environment check: is_production=False, is_render=False, is_https=False
ğŸª Cross-origin check: origin=http://localhost:3000, host=localhost:8000, origin_domain=localhost:3000, is_cross_origin=True
ğŸª Using samesite=lax
âš ï¸  Local development cross-origin detected - using samesite=lax (samesite=none requires HTTPS)
ğŸª Setting cookie: refresh_token with samesite=lax, secure=False
ğŸª Using local development cookie settings for refresh_token
ğŸª Cookie refresh_token set successfully
ğŸª Set-Cookie headers for refresh_token: ['access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNmNmMTc2NC01YmZjLTQzNTItYWJkOS04MWI3MmI3Y2YxOTEiLCJlbWFpbCI6Im11aGFtbWFkQHBpbmVjcmVzdGNvbnN1bHRpbmcuY29tIiwicm9sZSI6ImFkbWluIiwiY29tcGFueV9pZCI6Ijg2MzliZTVhLWJhMjItNGViOC1iMTIzLTYxYmJjMGUxNmFiOSIsImFjY2Vzc19sZXZlbCI6ImJhc2ljIiwiZXhwIjoxNzYyNTM4NDAxLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYyNTM0ODAxLCJqdGkiOiIzYzVhNDcxOThiNjc3MmQzNjc1YmZiMWU0MTc3YTMwYyJ9.ev_y05zOSG4i2z_BGY8mTBG1mZVFLh8rwHPa4yh7a4o; HttpOnly; Max-Age=3600; Path=/; SameSite=lax']
ğŸª Environment variables:
ğŸª   ENVIRONMENT: not_set
ğŸª   NODE_ENV: not_set
ğŸª   RENDER: not_set
ğŸª   PORT: not_set
ğŸª HTTPS Detection:
ğŸª   request.url.scheme: http
ğŸª   x-forwarded-proto: not_set
ğŸª   x-forwarded-ssl: not_set
ğŸª   x-forwarded-scheme: not_set
ğŸª   Final is_https: False
ğŸª Environment check: is_production=False, is_render=False, is_https=False
ğŸª Cross-origin check: origin=http://localhost:3000, host=localhost:8000, origin_domain=localhost:3000, is_cross_origin=True
ğŸª Using samesite=lax
âš ï¸  Local development cross-origin detected - using samesite=lax (samesite=none requires HTTPS)
ğŸª Setting cookie: session_token with samesite=lax, secure=False
ğŸª Using local development cookie settings for session_token
ğŸª Cookie session_token set successfully
ğŸª Set-Cookie headers for session_token: ['access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNmNmMTc2NC01YmZjLTQzNTItYWJkOS04MWI3MmI3Y2YxOTEiLCJlbWFpbCI6Im11aGFtbWFkQHBpbmVjcmVzdGNvbnN1bHRpbmcuY29tIiwicm9sZSI6ImFkbWluIiwiY29tcGFueV9pZCI6Ijg2MzliZTVhLWJhMjItNGViOC1iMTIzLTYxYmJjMGUxNmFiOSIsImFjY2Vzc19sZXZlbCI6ImJhc2ljIiwiZXhwIjoxNzYyNTM4NDAxLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYyNTM0ODAxLCJqdGkiOiIzYzVhNDcxOThiNjc3MmQzNjc1YmZiMWU0MTc3YTMwYyJ9.ev_y05zOSG4i2z_BGY8mTBG1mZVFLh8rwHPa4yh7a4o; HttpOnly; Max-Age=3600; Path=/; SameSite=lax']
ğŸª Cookies set successfully
ğŸª Response headers after setting cookies: {'set-cookie': 'access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNmNmMTc2NC01YmZjLTQzNTItYWJkOS04MWI3MmI3Y2YxOTEiLCJlbWFpbCI6Im11aGFtbWFkQHBpbmVjcmVzdGNvbnN1bHRpbmcuY29tIiwicm9sZSI6ImFkbWluIiwiY29tcGFueV9pZCI6Ijg2MzliZTVhLWJhMjItNGViOC1iMTIzLTYxYmJjMGUxNmFiOSIsImFjY2Vzc19sZXZlbCI6ImJhc2ljIiwiZXhwIjoxNzYyNTM4NDAxLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYyNTM0ODAxLCJqdGkiOiIzYzVhNDcxOThiNjc3MmQzNjc1YmZiMWU0MTc3YTMwYyJ9.ev_y05zOSG4i2z_BGY8mTBG1mZVFLh8rwHPa4yh7a4o; HttpOnly; Max-Age=3600; Path=/; SameSite=lax'}
INFO:app.services.audit_logging_service:Audit: logout by user f6cf1764-5bfc-4352-abd9-81b72b7cf191 on user_authentication
INFO:     127.0.0.1:62706 - "POST /api/auth/otp/verify HTTP/1.1" 200 OK
INFO:     127.0.0.1:62735 - "OPTIONS /environments HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /environments HTTP/1.1" 200 OK
INFO:     127.0.0.1:62748 - "GET /api/earned-commission/carriers HTTP/1.1" 200 OK
ğŸ” Debug - All cookies received: ['__next_hmr_refresh_hash__', 'access_token', 'refresh_token', 'session_token']
ğŸ” Debug - Access token present: True
INFO:     127.0.0.1:62750 - "GET /api/earned-commission/carriers-detailed?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62746 - "GET /api/dashboard/earned-commissions?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62742 - "GET /api/earned-commission/stats?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62744 - "GET /api/dashboard/stats?view_mode=my_data&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62748 - "GET /api/auth/permissions HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /api/earned-commission/companies-aggregated?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62750 - "GET /api/earned-commission/carriers HTTP/1.1" 200 OK
INFO:     127.0.0.1:62746 - "GET /api/earned-commission/carriers-detailed?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62742 - "GET /api/dashboard/earned-commissions?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62744 - "GET /api/earned-commission/stats?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62748 - "GET /api/dashboard/stats?view_mode=my_data&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /api/earned-commission/companies-aggregated?view_mode=my_data&year=2025&environment_id=ce970b80-0cbc-4861-b6bd-449e1590a99c HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:62706 - "GET /api/database-fields/?active_only=true HTTP/1.1" 200 OK
WARNING:app.api.websocket:WebSocket connection without explicit token for upload_id=upload_1762534835960_9juu9tf2m. This is allowed for progress tracking, but consider implementing token passing for production.
INFO:app.api.websocket:Attempting to connect WebSocket for upload_id: upload_1762534835960_9juu9tf2m, session_id: session_1762534835990_g6zwtwaf8
INFO:     127.0.0.1:62880 - "WebSocket /api/ws/progress/upload_1762534835960_9juu9tf2m?session_id=session_1762534835990_g6zwtwaf8" [accepted]
INFO:app.services.websocket_service:WebSocket connected: upload_id=upload_1762534835960_9juu9tf2m, session_id=session_1762534835990_g6zwtwaf8, timeout=1800s
INFO:     connection open
INFO:app.api.websocket:WebSocket connected successfully for upload_id: upload_1762534835960_9juu9tf2m, session_id: session_1762534835990_g6zwtwaf8
INFO:app.api.websocket:Started keepalive task for upload_id=upload_1762534835960_9juu9tf2m
INFO:     127.0.0.1:62882 - "OPTIONS /api/extract-tables-smart/ HTTP/1.1" 200 OK
INFO:app.api.new_extract:ğŸ“ File: 01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:ğŸ”‘ Hash: 725348b8b20e1e6c7e089eba26510d580aab46dec4230160465fc0968f72808a
INFO:app.api.new_extract:ğŸ“ Size: 168912 bytes
INFO:app.api.new_extract:ğŸ‘¤ User: f6cf1764-5bfc-4352-abd9-81b72b7cf191
INFO:app.services.duplicate_detection_service:ğŸ” Checking for user duplicates - Hash: 725348b8b20e1e6c7e089eba26510d580aab46dec4230160465fc0968f72808a, User: f6cf1764-5bfc-4352-abd9-81b72b7cf191
INFO:app.services.duplicate_detection_service:ğŸ“š Recent uploads for user:
INFO:app.services.duplicate_detection_service:  - statements/607ba6c6-2ecf-4966-b7ad-0aad2d2f4a21/8.6.2025.pdf: hash=328b73e57c101b42..., status=approved
INFO:app.services.duplicate_detection_service:  - statements/1835b956-6811-4060-b99f-18f87157fa9b/01.13.2025.2 Allied Innovative Payment.pdf: hash=3e2ff2652f27d527..., status=Approved
INFO:app.services.duplicate_detection_service:âŒ No duplicate found for hash: 725348b8b20e1e6c7e089eba26510d580aab46dec4230160465fc0968f72808a
INFO:app.api.new_extract:ğŸš€ Starting extract-tables-smart for file: 01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:ğŸ“ File path: pdfs/01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:ğŸ“Š File size: 168912 bytes
INFO:app.api.new_extract:ğŸ†” Upload ID: upload_1762534835960_9juu9tf2m
INFO:app.api.new_extract:ğŸ’¾ Saving uploaded file...
INFO:app.api.new_extract:âœ… File saved successfully
INFO:app.api.new_extract:ğŸ“¤ Uploading file to GCS: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.gcs_utils:âœ… File uploaded to GCS: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:âœ… Successfully uploaded and verified file in GCS: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.gcs_utils:âœ… Generated signed URL for GCS file with inline headers: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Step started: Uploading Document (Step 1) for upload_id upload_1762534835960_9juu9tf2m
INFO:app.api.new_extract:Using specified environment ce970b80-0cbc-4861-b6bd-449e1590a99c (Default) for upload
INFO:app.services.audit_logging_service:Audit: data_view by user f6cf1764-5bfc-4352-abd9-81b72b7cf191 on extraction_process (ID: 56fa1a44-53e3-4511-87c5-07437667ff38)
INFO:app.api.new_extract:ğŸ”§ Getting enhanced extraction service...
INFO:app.services.claude.service:ğŸ”„ Initializing Claude API client (SDK version: True)
INFO:app.services.claude.service:ğŸ”‘ API Key found: sk-ant-api03-Du...
INFO:app.services.claude.service:âœ… Claude API client initialized successfully
INFO:app.services.claude.service:ğŸ“‹ Client object: <class 'anthropic.Anthropic'>
INFO:app.services.claude.semantic_extractor:âœ… Semantic Extraction Service initialized
INFO:app.services.claude.service:âœ… Claude Document AI Service initialized
INFO:app.services.claude.service:ğŸ“‹ Primary model: claude-sonnet-4-20250514
INFO:app.services.claude.service:ğŸ“‹ Fallback model: claude-sonnet-4-20250514
INFO:app.services.claude.service:ğŸ“ Limits: 32MB, 100 pages
INFO:app.services.mistral.service:âœ… Mistral client initialized successfully
INFO:app.services.mistral.service:   Model: mistral-ocr-latest (Mistral OCR for Document AI)
INFO:app.services.mistral.service:   API Key: ****************************xGt2
INFO:app.services.mistral.service:Enhanced Mistral service initialized with summary detection and performance optimization
INFO:app.services.company_name_service:spaCy not available, using pattern matching only
INFO:app.services.gpt4o_vision_service:GPT-5 Vision service initialized successfully
2025-11-07 19:00:47 | INFO | app.new_extraction_services.pipeline.extraction_pipeline:_initialize_components:103 | Initializing pipeline components...
2025-11-07 19:00:47 | INFO | app.new_extraction_services.models.tableformer:_load_models:94 | Loading TableFormer models...
2025-11-07 19:00:47 | INFO | app.new_extraction_services.models.tableformer:_load_models:105 | TableFormer models loaded in 0.00s
preprocessor_config.json: 100%|â–ˆâ–ˆâ–ˆâ–ˆ| 273/273 [00:00<00:00, 2.36MB/s]
Using a slow image processor as `use_fast` is unset and a slow processor was saved with this model. `use_fast=True` will be the default behavior in v4.52, even if the model was saved with a slow processor. This will result in minor differences in outputs. You'll still be able to use a slow processor with `use_fast=False`.
The `max_size` parameter is deprecated and will be removed in v4.26. Please specify in `size['longest_edge'] instead`.
config.json: 1.23kB [00:00, 7.77MB/s]
model.safetensors: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 115M/115M [00:02<00:00, 48.8MB/s]
INFO:timm.models._builder:Loading pretrained weights from Hugging Face hub (timm/resnet18.a1_in1k)
INFO:timm.models._hub:[timm/resnet18.a1_in1k] Safe alternative available for 'pytorch_model.bin' (as 'model.safetensors'). Loading weights using safetensors.
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.downsample.0.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.downsample.1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.downsample.1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.downsample.0.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.downsample.1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.downsample.1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.downsample.0.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.downsample.1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.downsample.1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
INFO:timm.models._builder:Missing keys (fc.weight, fc.bias) discovered while loading pretrained weights. This is expected if model is being adapted.
Some weights of the model checkpoint at microsoft/table-transformer-detection were not used when initializing TableTransformerForObjectDetection: ['model.backbone.conv_encoder.model.layer2.0.downsample.1.num_batches_tracked', 'model.backbone.conv_encoder.model.layer3.0.downsample.1.num_batches_tracked', 'model.backbone.conv_encoder.model.layer4.0.downsample.1.num_batches_tracked']
- This IS expected if you are initializing TableTransformerForObjectDetection from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing TableTransformerForObjectDetection from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
2025-11-07 19:00:51 | INFO | app.new_extraction_services.models.advanced_tableformer:_load_detection_model:44 | Table detection model loaded successfully
preprocessor_config.json: 100%|â–ˆâ–ˆâ–ˆâ–ˆ| 374/374 [00:00<00:00, 1.33MB/s]
config.json: 76.8kB [00:00, 20.7MB/s]
model.safetensors: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 115M/115M [00:02<00:00, 47.5MB/s]
2025-11-07 19:00:55 | INFO | app.new_extraction_services.models.advanced_tableformer:_load_structure_model:76 | Table structure model loaded successfully
2025-11-07 19:00:55 | INFO | app.new_extraction_services.pipeline.extraction_pipeline:_initialize_components:114 | Advanced TableFormer initialized
WARNING:easyocr.easyocr:Using CPU. Note: This module is much faster with a GPU.
2025-11-07 19:00:57 | INFO | app.new_extraction_services.models.tableformer:_init_easyocr:409 | EasyOCR initialized successfully
WARNING:easyocr.easyocr:Using CPU. Note: This module is much faster with a GPU.


  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.downsample.0.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.downsample.1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.downsample.1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.downsample.0.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.downsample.1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.downsample.1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
INFO:timm.models._builder:Missing keys (fc.weight, fc.bias) discovered while loading pretrained weights. This is expected if model is being adapted.
Some weights of the model checkpoint at microsoft/table-transformer-detection were not used when initializing TableTransformerForObjectDetection: ['model.backbone.conv_encoder.model.layer2.0.downsample.1.num_batches_tracked', 'model.backbone.conv_encoder.model.layer3.0.downsample.1.num_batches_tracked', 'model.backbone.conv_encoder.model.layer4.0.downsample.1.num_batches_tracked']
- This IS expected if you are initializing TableTransformerForObjectDetection from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing TableTransformerForObjectDetection from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
2025-11-07 19:00:51 | INFO | app.new_extraction_services.models.advanced_tableformer:_load_detection_model:44 | Table detection model loaded successfully
preprocessor_config.json: 100%|â–ˆâ–ˆâ–ˆâ–ˆ| 374/374 [00:00<00:00, 1.33MB/s]
config.json: 76.8kB [00:00, 20.7MB/s]
model.safetensors: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 115M/115M [00:02<00:00, 47.5MB/s]
2025-11-07 19:00:55 | INFO | app.new_extraction_services.models.advanced_tableformer:_load_structure_model:76 | Table structure model loaded successfully
2025-11-07 19:00:55 | INFO | app.new_extraction_services.pipeline.extraction_pipeline:_initialize_components:114 | Advanced TableFormer initialized
WARNING:easyocr.easyocr:Using CPU. Note: This module is much faster with a GPU.
2025-11-07 19:00:57 | INFO | app.new_extraction_services.models.tableformer:_init_easyocr:409 | EasyOCR initialized successfully
WARNING:easyocr.easyocr:Using CPU. Note: This module is much faster with a GPU.
2025-11-07 19:00:59 | INFO | app.new_extraction_services.models.advanced_ocr_engine:_init_ocr_engines:60 | EasyOCR engine initialized
2025-11-07 19:01:00 | INFO | app.new_extraction_services.models.advanced_ocr_engine:_init_ocr_engines:72 | Tesseract OCR engine initialized
2025-11-07 19:01:00 | INFO | app.new_extraction_services.models.advanced_ocr_engine:_init_ocr_engines:94 | Initialized 2 OCR engines to prevent OMP conflicts
2025-11-07 19:01:00 | INFO | app.new_extraction_services.pipeline.extraction_pipeline:_initialize_components:133 | Advanced OCR engine initialized
2025-11-07 19:01:00 | INFO | app.new_extraction_services.pipeline.extraction_pipeline:_initialize_components:141 | Pipeline components initialized successfully
INFO:timm.models._builder:Loading pretrained weights from Hugging Face hub (timm/resnet18.a1_in1k)
INFO:timm.models._hub:[timm/resnet18.a1_in1k] Safe alternative available for 'pytorch_model.bin' (as 'model.safetensors'). Loading weights using safetensors.
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer1.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.downsample.0.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.downsample.1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.0.downsample.1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer2.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.downsample.0.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.downsample.1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.0.downsample.1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer3.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.downsample.0.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.downsample.1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.0.downsample.1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.conv1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn1.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn1.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.conv2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn2.weight: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
/Users/kayttaja/Desktop/commision-tracker/server/venv/lib/python3.11/site-packages/torch/nn/modules/module.py:2025: UserWarning: for layer4.1.bn2.bias: copying from a non-meta parameter in the checkpoint to a meta parameter in the current model, which is a no-op. (Did you mean to pass `assign=True` to assign items in the state dictionary to their corresponding key in the module instead of copying them in place?)
  warnings.warn(f'for {key}: copying from a non-meta parameter in the checkpoint to a meta '
INFO:timm.models._builder:Missing keys (fc.weight, fc.bias) discovered while loading pretrained weights. This is expected if model is being adapted.
Some weights of the model checkpoint at microsoft/table-transformer-detection were not used when initializing TableTransformerForObjectDetection: ['model.backbone.conv_encoder.model.layer2.0.downsample.1.num_batches_tracked', 'model.backbone.conv_encoder.model.layer3.0.downsample.1.num_batches_tracked', 'model.backbone.conv_encoder.model.layer4.0.downsample.1.num_batches_tracked']
- This IS expected if you are initializing TableTransformerForObjectDetection from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing TableTransformerForObjectDetection from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
2025-11-07 19:01:01 | INFO | app.new_extraction_services.models.advanced_tableformer:_load_detection_model:44 | Table detection model loaded successfully
2025-11-07 19:01:02 | INFO | app.new_extraction_services.models.advanced_tableformer:_load_structure_model:76 | Table structure model loaded successfully
WARNING:easyocr.easyocr:Using CPU. Note: This module is much faster with a GPU.
2025-11-07 19:01:04 | INFO | app.new_extraction_services.models.advanced_ocr_engine:_init_ocr_engines:60 | EasyOCR engine initialized
2025-11-07 19:01:04 | INFO | app.new_extraction_services.models.advanced_ocr_engine:_init_ocr_engines:72 | Tesseract OCR engine initialized
2025-11-07 19:01:04 | INFO | app.new_extraction_services.models.advanced_ocr_engine:_init_ocr_engines:94 | Initialized 2 OCR engines to prevent OMP conflicts
INFO:app.services.company_name_service:spaCy not available, using pattern matching only
2025-11-07 19:01:04 | INFO | app.services.new_extraction_service:__init__:57 | New Extraction Service initialized successfully
INFO:app.services.company_name_service:spaCy not available, using pattern matching only
âœ… Set GOOGLE_DOCAI_PROCESSOR_ID to: 521303e404fb7809
âœ… Google Document AI initialized - Project: pdf-tables-extractor-465009, Processor: 521303e404fb7809
INFO:app.services.enhanced_extraction_service:âœ… Enhanced Extraction Service initialized
INFO:app.services.enhanced_extraction_service:ğŸ†• PRIMARY: Claude Document AI (extraction) + GPT-4 (AI operations)
INFO:app.services.enhanced_extraction_service:ğŸ“‹ FALLBACK: Mistral Document AI
INFO:app.services.enhanced_extraction_service:â±ï¸  Timeout management: {'metadata_extraction': 300, 'document_processing': 600, 'table_extraction': 1200, 'post_processing': 300, 'total_process': 1800}
INFO:app.services.enhanced_extraction_service:ğŸš€ Enhanced 3-phase pipeline: ENABLED
INFO:app.api.new_extract:âœ… Enhanced extraction service obtained (enhanced_mode=True)
INFO:app.api.new_extract:ğŸš€ Starting extraction task...
INFO:app.api.new_extract:ğŸ“Š Calling extract_tables_with_progress...
INFO:app.services.enhanced_extraction_service:âœ… Using Claude as primary extraction service
INFO:app.services.enhanced_extraction_service:âœ… CLAUDE service validated successfully
INFO:app.services.enhanced_extraction_service:Routing to Claude extraction (method: smart)
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Started stage document_processing for upload upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Completed stage document_processing for upload upload_1762534835960_9juu9tf2m
INFO:app.services.enhanced_extraction_service:ğŸ” Starting GPT metadata extraction...
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Started stage gpt_metadata_extraction for upload upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.enhanced_extraction_service:ğŸ“¡ Emitting extraction step...
INFO:app.services.enhanced_extraction_service:ğŸ“„ Calling _extract_metadata_with_gpt for file: pdfs/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Step started: Analyzing Document (Step 2) for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.enhanced_extraction_service:ğŸ” Starting _extract_metadata_with_gpt for file: pdfs/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.enhanced_extraction_service:Extracting metadata with GPT from first page of pdfs/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.enhanced_extraction_service:ğŸ“„ Opening PDF file: pdfs/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.enhanced_extraction_service:ğŸ“„ PDF has 3 pages, loading first page
INFO:app.services.enhanced_extraction_service:ğŸ–¼ï¸ Converting first page to image...
INFO:app.services.enhanced_extraction_service:ğŸ–¼ï¸ Converting to PIL Image...
INFO:app.services.enhanced_extraction_service:ğŸ–¼ï¸ Converting to base64...
INFO:app.services.enhanced_extraction_service:âœ… Converted first page to image (1021488 chars)
INFO:app.services.enhanced_extraction_service:ğŸ” Checking GPT service availability...
INFO:app.services.enhanced_extraction_service:âœ… GPT-4 service is available
INFO:app.services.enhanced_extraction_service:Calling GPT-4 Vision API for metadata extraction

pdf
INFO:app.services.enhanced_extraction_service:Extracting metadata with GPT from first page of pdfs/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.enhanced_extraction_service:ğŸ“„ Opening PDF file: pdfs/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.enhanced_extraction_service:ğŸ“„ PDF has 3 pages, loading first page
INFO:app.services.enhanced_extraction_service:ğŸ–¼ï¸ Converting first page to image...
INFO:app.services.enhanced_extraction_service:ğŸ–¼ï¸ Converting to PIL Image...
INFO:app.services.enhanced_extraction_service:ğŸ–¼ï¸ Converting to base64...
INFO:app.services.enhanced_extraction_service:âœ… Converted first page to image (1021488 chars)
INFO:app.services.enhanced_extraction_service:ğŸ” Checking GPT service availability...
INFO:app.services.enhanced_extraction_service:âœ… GPT-4 service is available
INFO:app.services.enhanced_extraction_service:Calling GPT-4 Vision API for metadata extraction
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.services.enhanced_extraction_service:GPT-4 response: {
  "carrier_name": "UnitedHealthcare",
  "carrier_confidence": 0.95,
  "statement_date": "01/13/2025",
  "date_confidence": 0.90,
  "broker_company": "INNOVATIVE BPS LLC",
  "broker_confidence": 0.85,
  "evidence": "Carrier name found in the logo at the top left. Statement date found under 'EFT Settlement Date'. Broker company found under 'Producer Name'.",
  "summary": "The document is a commission statement from UnitedHealthcare for INNOVATIVE BPS LLC. It covers the period from 12/18/2024 to 01/01/2025, with an EFT settlement date of 01/13/2025. The total compensation amount is $1,935.29. The document includes detailed base commission and service fee details for various customers and services."
}
INFO:app.services.extraction_utils:Date normalized: '01/13/2025' -> '2025-01-13'
INFO:app.services.enhanced_extraction_service:âœ… GPT metadata extraction successful: {'success': True, 'carrier_name': 'UnitedHealthcare', 'carrier_confidence': 0.95, 'statement_date': '2025-01-13', 'date_confidence': 0.9, 'broker_company': 'INNOVATIVE BPS LLC', 'broker_confidence': 0.85, 'summary': 'The document is a commission statement from UnitedHealthcare for INNOVATIVE BPS LLC. It covers the period from 12/18/2024 to 01/01/2025, with an EFT settlement date of 01/13/2025. The total compensation amount is $1,935.29. The document includes detailed base commission and service fee details for various customers and services.', 'evidence': "Carrier name found in the logo at the top left. Statement date found under 'EFT Settlement Date'. Broker company found under 'Producer Name'.", 'extraction_method': 'gpt4o_vision_first_page'}
INFO:app.services.enhanced_extraction_service:âœ… GPT metadata marked as successful in result
INFO:app.services.enhanced_extraction_service:ğŸ“¤ Sending step progress with metadata...
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.enhanced_extraction_service:âœ… Step progress sent successfully
INFO:app.services.enhanced_extraction_service:ğŸ“¡ Emitting table_extraction step...
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Step started: Reading Commission Data (Step 3) for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Started stage table_detection for upload upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.enhanced_extraction_service:Starting Claude extraction for pdfs/01.07.2025 UHC Commission Statement.pdf (enhanced=True)
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.claude.service:Standard file (3 pages, 0.16MB)
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Completed stage document_processing for upload upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Started stage table_detection for upload upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.claude.dynamic_prompts:âœ… Using carrier-specific prompt for: UnitedHealthcare
INFO:app.services.claude.service:ğŸ¯ Using carrier-specific dynamic prompt for: UnitedHealthcare
INFO:app.services.claude.service:Calling Claude API with model: claude-sonnet-4-20250514 (attempt 1/3)
INFO:app.api.websocket:Received unknown message type: heartbeat
INFO:app.api.websocket:Received unknown message type: heartbeat
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:app.services.claude.service:âœ… Claude API call successful. Tokens: {'input_tokens': 7739, 'output_tokens': 3423}
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
ERROR:app.services.claude.utils:JSON decode error: Expecting value: line 1 column 1 (char 0)
ERROR:app.services.claude.utils:Response text: Looking at this UnitedHealthcare commission statement, I'll extract all tables and metadata with precision.

```json
{
  "tables": [
    {
      "headers": ["Company Name", "Cov Type", "Bill Eff Date", "Billed Premium", "Paid Premium", "Sub Count", "Adj Typ", "Iss St", "Method", "Rate", "Split %", "Comp Type", "Bus Type", "Billed Fee Amount", "Customer Paid Fee", "Paid Amount"],
      "rows": [
        ["B & B Lightning Protection", "Med", "2024-10-01", "($3,844.84)", "($3,221.78)", "3", "Q", "N
INFO:app.services.extraction_utils:Header normalization: 16 headers normalized
INFO:app.services.extraction_utils:Header normalization: 6 headers normalized
INFO:app.services.extraction_utils:Header normalization: 2 headers normalized
INFO:app.services.extraction_utils:Header normalization: 6 headers normalized
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Completed stage table_detection for upload upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Started stage validation for upload upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Completed stage validation for upload upload_1762534835960_9juu9tf2m
INFO:app.services.claude.service:ğŸš€ Running enhanced 3-phase extraction pipeline...
INFO:app.services.claude.service:   Phase 1: Document Intelligence âœ“ (completed)
INFO:app.services.claude.service:   Phase 2: Semantic Extraction â†’ Starting...
INFO:app.services.claude.service:   Phase 3: Intelligent Summarization â†’ Pending...
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Started stage semantic_analysis for upload upload_1762534835960_9juu9tf2m
INFO:app.services.claude.service:ğŸ“Š Phase 2: Semantic extraction and relationship mapping...
INFO:app.services.claude.semantic_extractor:ğŸ” Starting semantic extraction and relationship mapping...
INFO:app.services.claude.semantic_extractor:ğŸ“Š Extracted 0 writing agents: []
INFO:app.services.claude.semantic_extractor:ğŸ“Š Extracted 14 groups/companies
INFO:app.services.claude.semantic_extractor:âœ… Semantic extraction completed successfully
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Completed stage semantic_analysis for upload upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Started stage summary_generation for upload upload_1762534835960_9juu9tf2m
INFO:app.services.claude.service:âœï¸ Phase 3: Intelligent summarization...
INFO:app.services.claude.service:ğŸ“Š Semantic result keys: ['success', 'entities', 'relationships', 'business_intelligence', 'raw_tables']
INFO:app.services.claude.service:   - Entities: âœ…
INFO:app.services.claude.service:   - Relationships: âœ…
INFO:app.services.claude.service:   - Business Intelligence: âœ…
INFO:app.services.claude.service:ğŸ“ Summary service available: True
INFO:app.services.claude.service:ğŸš€ Calling generate_conversational_summary with use_enhanced=True...
INFO:app.services.conversational_summary_service:ğŸ—£ï¸ Generating conversational summary...
INFO:app.services.conversational_summary_service:ğŸ” _build_summary_prompt called:
INFO:app.services.conversational_summary_service:   - use_enhanced: True
INFO:app.services.conversational_summary_service:   - has_enhanced_data: True
INFO:app.services.conversational_summary_service:   - extraction_data keys: ['success', 'entities', 'relationships', 'business_intelligence', 'raw_tables']
INFO:app.services.conversational_summary_service:âœ… Using ENHANCED summary prompt (with enhanced prompts module)
INFO:app.services.conversational_summary_service:ğŸ¯ Building enhanced summary prompt...
INFO:app.services.conversational_summary_service:   - Entities: ['carrier', 'broker', 'writing_agents', 'groups_and_companies', 'document_metadata']
INFO:app.services.conversational_summary_service:   - Relationships: ['carrier_to_broker', 'broker_to_agents', 'agents_to_groups', 'groups_to_payments']
INFO:app.services.conversational_summary_service:   - Business Intelligence: ['total_commission_amount', 'number_of_groups', 'commission_structures', 'top_contributors', 'special_payments', 'payment_period', 'patterns_detected']
INFO:app.services.conversational_summary_service:âœ… SUCCESS: Enhanced prompts module imported
INFO:app.services.conversational_summary_service:ğŸš€ Using EnhancedClaudePrompts.get_intelligent_summarization_prompt()
INFO:app.services.conversational_summary_service:âœ… SUCCESS: Enhanced prompts imported correctly
INFO:app.services.conversational_summary_service:ğŸš€ Calling Claude API for summary generation...
INFO:app.services.conversational_summary_service:   Model: claude-sonnet-4-20250514
INFO:app.services.conversational_summary_service:   Max tokens: 1200
INFO:app.services.conversational_summary_service:   Prompt length: 13835 chars
INFO:app.services.conversational_summary_service:   System prompt length: 1421 chars
INFO:app.api.websocket:Received unknown message type: heartbeat
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:app.services.conversational_summary_service:âœ… Claude API call successful
INFO:app.services.conversational_summary_service:   Response content blocks: 1
INFO:app.services.conversational_summary_service:ğŸ“„ Generated summary length: 824 characters
INFO:app.services.conversational_summary_service:ğŸ“„ Generated summary: This is  a UnitedHealthcare commission statement for INNOVATIVE BPS LLC dated January 7, 2025, showing commission payments across 14 separate line items totaling $1,380.00 in gross commissions. The payment structure reveals significant variation in commission amounts, with the largest single payment at $400.00, followed by $250.00 and two payments of $240.00 each, while smaller amounts range from $30.00 to $210.00. The statement includes one notable chargeback of ($50.00) that was subsequently offset by a matching $50.00 credit, indicating an adjustment or correction was processed during this period. The commission structure appears to use both percentage-based and PEPM methodologies across the portfolio, though specific agent assignments and group identifiers are not detailed in this particular statement format.
INFO:app.services.conversational_summary_service:âœ… Summary generated in 7.07s: This is  a UnitedHealthcare commission statement for INNOVATIVE BPS LLC dated January 7, 2025, showi...
INFO:app.services.claude.service:âœ… Summary generation completed. Success: True
INFO:app.services.claude.service:ğŸ“„ Generated summary (first 200 chars): This is  a UnitedHealthcare commission statement for INNOVATIVE BPS LLC dated January 7, 2025, showing commission payments across 14 separate line items totaling $1,380.00 in gross commissions. The pa...
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Completed stage summary_generation for upload upload_1762534835960_9juu9tf2m
INFO:app.services.claude.service:âœ… Enhanced 3-phase pipeline completed successfully
INFO:app.services.claude.service:ğŸ“¦ Enhanced result keys: ['success', 'tables', 'extraction_method', 'file_type', 'document_metadata', 'extracted_carrier', 'extracted_date', 'quality_summary', 'metadata', 'extraction_quality', 'entities', 'relationships', 'business_intelligence', 'summary', 'extraction_pipeline', 'semantic_extraction_success']
INFO:app.services.claude.service:   - Summary length: 824 characters
INFO:app.services.claude.service:   - Summary preview: This is  a UnitedHealthcare commission statement for INNOVATIVE BPS LLC dated January 7, 2025, showing commission payments across 14 separate line ite...
INFO:app.services.claude.service:âœ… Claude extraction completed in 47.77s
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
ğŸ“ Enhanced multi-strategy stitching: Processing 4 tables
ğŸ“ Canonical header identified: ['Company Name', 'Cov Type', 'Bill Eff Date', 'Billed Premium', 'Paid Premium', 'Sub Count', 'Adj Typ', 'Iss St', 'Method', 'Rate', 'Split %', 'Comp Type', 'Bus Type', 'Billed Fee Amount', 'Customer Paid Fee', 'Paid Amount'] (16 columns)
ğŸ“ Table 1 headers: ['Company Name', 'Cov Type', 'Bill Eff Date', 'Billed Premium', 'Paid Premium', 'Sub Count', 'Adj Typ', 'Iss St', 'Method', 'Rate', 'Split %', 'Comp Type', 'Bus Type', 'Billed Fee Amount', 'Customer Paid Fee', 'Paid Amount'] (16 columns)
ğŸ“ Table 2 headers: ['Compensation Period Start Date', 'Compensation Period End Date', 'EFT Settlement Date', 'EFT Account Number', '%', 'Amount'] (6 columns)
ğŸ“ Table 3 headers: ['Current Compensation', 'YTD Compensation'] (2 columns)
ğŸ“ Table 4 headers: ['Hold Reason', 'Compensation Type', 'Business Type', 'State', 'Hold Eff Date', 'Legal Entity'] (6 columns)
ğŸ“ Found 4 unique header patterns
ğŸ“ Grouped 4 tables into 4 groups
ğŸ“ Merging group 1 with 1 tables
INFO:app.services.mistral.service:âœ… Mistral client initialized successfully
INFO:app.services.mistral.service:   Model: mistral-ocr-latest (Mistral OCR for Document AI)
INFO:app.services.mistral.service:   API Key: ****************************xGt2
INFO:app.services.mistral.service:Enhanced Mistral service initialized with summary detection and performance optimization
INFO:app.services.mistral.service:Applying enhancements to table with 26 rows
INFO:app.services.mistral.service:Phase 1: Applying professional bracket processing...
INFO:app.services.mistral.enhancement_config:Bracket processing recorded: 15 brackets converted
INFO:app.services.mistral.service:âœ“ Bracket processing: 15 values converted (3.6% conversion rate)
INFO:app.services.mistral.service:Phase 2: Applying multi-strategy summary detection...
INFO:app.services.mistral.enhancement_config:Summary detection recorded: 0 rows removed, confidence: 0.00
INFO:app.services.mistral.service:âœ“ Summary detection: No summary rows detected (confidence: 0.00%)
INFO:app.services.mistral.enhancement_config:Performance recorded: 0.00s (avg: 0.00s)
INFO:app.services.mistral.service:âœ“ Table enhancements completed in 0.00s
INFO:app.services.extraction_utils:âœ… Re-applied enhancements to merged table: 26 rows
ğŸ“ Merged table 1: 16 headers, 26 rows
ğŸ“ Merged headers: ['Company Name', 'Cov Type', 'Bill Eff Date', 'Billed Premium', 'Paid Premium', 'Sub Count', 'Adj Typ', 'Iss St', 'Method', 'Rate', 'Split %', 'Comp Type', 'Bus Type', 'Billed Fee Amount', 'Customer Paid Fee', 'Paid Amount']
ğŸ“ Merging group 2 with 1 tables
INFO:app.services.mistral.service:âœ… Mistral client initialized successfully
INFO:app.services.mistral.service:   Model: mistral-ocr-latest (Mistral OCR for Document AI)
INFO:app.services.mistral.service:   API Key: ****************************xGt2
INFO:app.services.mistral.service:Enhanced Mistral service initialized with summary detection and performance optimization
INFO:app.services.mistral.service:Applying enhancements to table with 1 rows
INFO:app.services.mistral.service:Phase 1: Applying professional bracket processing...
INFO:app.services.mistral.enhancement_config:Bracket processing recorded: 1 brackets converted
INFO:app.services.mistral.service:âœ“ Bracket processing: 1 values converted (16.7% conversion rate)
INFO:app.services.mistral.service:Phase 2: Applying multi-strategy summary detection...
INFO:app.services.mistral.enhancement_config:Summary detection recorded: 0 rows removed, confidence: 0.00
INFO:app.services.mistral.service:âœ“ Summary detection: No summary rows detected (confidence: 0.00%)
INFO:app.services.mistral.enhancement_config:Performance recorded: 0.00s (avg: 0.00s)
INFO:app.services.mistral.service:âœ“ Table enhancements completed in 0.00s
INFO:app.services.extraction_utils:âœ… Re-applied enhancements to merged table: 1 rows
ğŸ“ Merged table 2: 6 headers, 1 rows
ğŸ“ Merged headers: ['Compensation Period Start Date', 'Compensation Period End Date', 'EFT Settlement Date', 'EFT Account Number', '%', 'Amount']
ğŸ“ Merging group 3 with 1 tables
INFO:app.services.mistral.service:âœ… Mistral client initialized successfully
INFO:app.services.mistral.service:   Model: mistral-ocr-latest (Mistral OCR for Document AI)
INFO:app.services.mistral.service:   API Key: ****************************xGt2
INFO:app.services.mistral.service:Enhanced Mistral service initialized with summary detection and performance optimization
INFO:app.services.mistral.service:Applying enhancements to table with 1 rows
INFO:app.services.mistral.service:Phase 1: Applying professional bracket processing...
INFO:app.services.mistral.enhancement_config:Bracket processing recorded: 2 brackets converted
INFO:app.services.mistral.service:âœ“ Bracket processing: 2 values converted (100.0% conversion rate)
INFO:app.services.mistral.service:Phase 2: Applying multi-strategy summary detection...
INFO:app.services.mistral.enhancement_config:Summary detection recorded: 0 rows removed, confidence: 0.00
INFO:app.services.mistral.service:âœ“ Summary detection: No summary rows detected (confidence: 0.00%)
INFO:app.services.mistral.enhancement_config:Performance recorded: 0.00s (avg: 0.00s)
INFO:app.services.mistral.service:âœ“ Table enhancements completed in 0.00s
INFO:app.services.extraction_utils:âœ… Re-applied enhancements to merged table: 1 rows
ğŸ“ Merged table 3: 2 headers, 1 rows
ğŸ“ Merged headers: ['Current Compensation', 'YTD Compensation']
ğŸ“ Merging group 4 with 1 tables
INFO:app.services.mistral.service:âœ… Mistral client initialized successfully
INFO:app.services.mistral.service:   Model: mistral-ocr-latest (Mistral OCR for Document AI)
INFO:app.services.mistral.service:   API Key: ****************************xGt2
INFO:app.services.mistral.service:Enhanced Mistral service initialized with summary detection and performance optimization
INFO:app.services.mistral.service:Applying enhancements to table with 15 rows
INFO:app.services.mistral.service:Phase 1: Applying professional bracket processing...
INFO:app.services.mistral.enhancement_config:Bracket processing recorded: 0 brackets converted
INFO:app.services.mistral.service:âœ“ Bracket processing: 0 values converted (0.0% conversion rate)
INFO:app.services.mistral.service:Phase 2: Applying multi-strategy summary detection...
INFO:app.services.mistral.enhancement_config:Summary detection recorded: 0 rows removed, confidence: 0.00
INFO:app.services.mistral.service:âœ“ Summary detection: No summary rows detected (confidence: 0.00%)
INFO:app.services.mistral.enhancement_config:Performance recorded: 0.00s (avg: 0.00s)
INFO:app.services.mistral.service:âœ“ Table enhancements completed in 0.00s
INFO:app.services.extraction_utils:âœ… Re-applied enhancements to merged table: 15 rows
ğŸ“ Merged table 4: 6 headers, 15 rows
ğŸ“ Merged headers: ['Hold Reason', 'Compensation Type', 'Business Type', 'State', 'Hold Eff Date', 'Legal Entity']
ğŸ“ Enhanced stitching completed: 4 final tables
INFO:app.services.extraction_utils:Header normalization: 16 headers normalized
INFO:app.services.enhanced_extraction_service:Claude: Verified normalized headers
INFO:app.services.extraction_utils:Header normalization: 6 headers normalized
INFO:app.services.enhanced_extraction_service:Claude: Verified normalized headers
INFO:app.services.extraction_utils:Header normalization: 2 headers normalized
INFO:app.services.enhanced_extraction_service:Claude: Verified normalized headers
INFO:app.services.extraction_utils:Header normalization: 6 headers normalized
INFO:app.services.enhanced_extraction_service:Claude: Verified normalized headers
INFO:app.services.enhanced_extraction_service:Claude: Processed 4 tables into 4 tables
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Completed stage table_detection for upload upload_1762534835960_9juu9tf2m
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:ğŸ¯ STAGE 3: CONVERSATIONAL SUMMARY GENERATION
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:   - Enhanced mode enabled: True
INFO:app.services.enhanced_extraction_service:   - Result has 'summary': True
INFO:app.services.enhanced_extraction_service:   - Summary service available: True
INFO:app.services.enhanced_extraction_service:âœ… Using enhanced summary from Claude pipeline
INFO:app.services.enhanced_extraction_service:   Summary length: 824 characters
INFO:app.services.enhanced_extraction_service:   Summary preview: This is  a UnitedHealthcare commission statement for INNOVATIVE BPS LLC dated January 7, 2025, showing commission payments across 14 separate line items totaling $1,380.00 in gross commissions. The pa...
INFO:app.services.enhanced_extraction_service:ğŸ“¤ Sending Claude-generated summary to frontend via WebSocket NOW
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.enhanced_extraction_service:âœ… Claude-generated summary sent to frontend successfully
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:ğŸ“ FINAL SUMMARY SELECTION: ENHANCED CONVERSATIONAL
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.enhanced_extraction_service:   Summary length: 824 characters
INFO:app.services.enhanced_extraction_service:   Full summary:
This is  a UnitedHealthcare commission statement for INNOVATIVE BPS LLC dated January 7, 2025, showing commission payments across 14 separate line items totaling $1,380.00 in gross commissions. The payment structure reveals significant variation in commission amounts, with the largest single payment at $400.00, followed by $250.00 and two payments of $240.00 each, while smaller amounts range from $30.00 to $210.00. The statement includes one notable chargeback of ($50.00) that was subsequently offset by a matching $50.00 credit, indicating an adjustment or correction was processed during this period. The commission structure appears to use both percentage-based and PEPM methodologies across the portfolio, though specific agent assignments and group identifiers are not detailed in this particular statement format.
INFO:app.services.enhanced_extraction_service:================================================================================
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Started stage validation for upload upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: progress_update
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: completion
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Completed processing for upload upload_1762534835960_9juu9tf2m in 62.87 seconds
INFO:app.api.new_extract:âœ… Extraction completed successfully: {'success': True, 'tables': [{'headers': ['Company Name', 'Cov Type', 'Bill Eff Date', 'Billed Premium', 'Paid Premium', 'Sub Count', 'Adj Typ', 'Iss St', 'Method', 'Rate', 'Split %', 'Comp Type', 'Bus Type', 'Billed Fee Amount', 'Customer Paid Fee', 'Paid Amount'], 'rows': [['B & B Lightning Protection', 'Med', '2024-10-01', '-$3844.84', '-$3221.78', '3', 'Q', 'NJ', 'PEPM', '$56.00', '100%', 'Comm', 'Comm', '', '', '-$168.00'], ['B & B Lightning Protection', 'Med', '2024-10-01', '$3844.84', '$623.06', '3', 'V', 'NJ', 'PEPM', '$56.00', '100%', 'Comm', 'Comm', '', '', '$168.00'], ['MAMMOTH DELIVERY LLC', 'Med', '2024-12-01', '$55.58', '$55.58', '3', 'V', 'WI', 'PEPM', '$30.00', '100%', 'Fee', 'Leve', '$90.00', '$90.00', '$90.00'], ['MAMMOTH DELIVERY LLC', 'Med', '2024-12-01', '$14.25', '$14.25', '1', 'V', 'WI', 'PEPM', '$30.00', '100%', 'Fee', 'Leve', '$30.00', '$30.00', '$30.00'], ['MAMMOTH DELIVERY LLC', 'Med', '2025-01-01', '$126.83', '$126.83', '8', 'V', 'WI', 'PEPM', '$30.00', '100%', 'Fee', 'Leve', '$240.00', '$240.00', '$240.00'], ['MAMMOTH DELIVERY LLC', 'Med', '2025-01-01', '$114.00', '$114.00', '8', 'V', 'WI', 'PEPM', '$30.00', '100%', 'Fee', 'Leve', '$240.00', '$240.00', '$240.00'], ['MAMMOTH DELIVERY LLC', 'Den', '2024-12-01', '$92.61', '$92.61', '3', 'V', 'WI', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '$9.26'], ['MAMMOTH DELIVERY LLC', 'Den', '2025-01-01', '$452.29', '$452.29', '19', 'V', 'WI', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '$45.23'], ['MAMMOTH DELIVERY LLC', 'Vis', '2024-12-01', '$27.51', '$27.51', '3', 'V', 'WI', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '$2.75'], ['MAMMOTH DELIVERY LLC', 'Vis', '2025-01-01', '$99.12', '$99.12', '14', 'V', 'WI', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '$9.91'], ['ALPHA ONE LOGISTICS LLC', 'Med', '2024-12-01', '$22.90', '$22.90', '1', 'V', 'FL', 'PEPM', '$35.00', '100%', 'Fee', 'Leve', '$35.00', '$35.00', '$35.00'], ['ALPHA ONE LOGISTICS LLC', 'Med', '2024-12-01', '$45.80', '$45.80', '2', 'V', 'FL', 'PEPM', '$35.00', '100%', 'Fee', 'Leve', '$70.00', '$70.00', '$70.00'], ['ALPHA ONE LOGISTICS LLC', 'Med', '2025-01-01', '$66.64', '$66.64', '2', 'V', 'FL', 'PEPM', '$35.00', '100%', 'Fee', 'Leve', '$70.00', '$70.00', '$70.00'], ['ALPHA ONE LOGISTICS LLC', 'Med', '2025-01-01', '$137.40', '$137.40', '6', 'V', 'FL', 'PEPM', '$35.00', '100%', 'Fee', 'Leve', '$210.00', '$210.00', '$210.00'], ['ALPHA ONE LOGISTICS LLC', 'Med', '2025-01-01', '$22.90', '$22.90', '1', 'V', 'FL', 'PEPM', '$35.00', '100%', 'Fee', 'Leve', '$35.00', '$35.00', '$35.00'], ['Go Go Logistics', 'Med', '2024-11-01', '-$20.51', '-$20.51', '-1', 'V', 'MO', 'PEPM', '$50.00', '100%', 'Fee', 'Leve', '-$50.00', '-$50.00', '-$50.00'], ['Go Go Logistics', 'Med', '2024-12-01', '$20.51', '$20.51', '1', 'V', 'MO', 'PEPM', '$50.00', '100%', 'Fee', 'Leve', '$50.00', '$50.00', '$50.00'], ['Go Go Logistics', 'Med', '2025-01-01', '$102.55', '$102.55', '5', 'V', 'MO', 'PEPM', '$50.00', '100%', 'Fee', 'Leve', '$250.00', '$250.00', '$250.00'], ['Go Go Logistics', 'Med', '2025-01-01', '$61.53', '$61.53', '3', 'V', 'MO', 'PEPM', '$50.00', '100%', 'Fee', 'Leve', '$150.00', '$150.00', '$150.00'], ['Go Go Logistics', 'Med', '2025-01-01', '$164.08', '$164.08', '8', 'V', 'MO', 'PEPM', '$50.00', '100%', 'Fee', 'Leve', '$400.00', '$400.00', '$400.00'], ['IMPACT HEATING AND COOLING', 'Den', '2024-11-01', '-$82.49', '-$82.49', '-1', 'V', 'CO', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '-$8.25'], ['IMPACT HEATING AND COOLING', 'Den', '2024-11-01', '$219.32', '$219.32', '3', 'V', 'CO', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '$21.93'], ['IMPACT HEATING AND COOLING', 'Den', '2024-11-01', '$305.15', '$305.15', '4', 'V', 'CO', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '$30.52'], ['IMPACT HEATING AND COOLING', 'Vis', '2024-10-01', '-$11.25', '-$11.25', '-1', 'V', 'CO', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '-$1.13'], ['IMPACT HEATING AND COOLING', 'Vis', '2024-11-01', '$31.00', '$31.00', '4', 'V', 'CO', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '$3.10'], ['IMPACT HEATING AND COOLING', 'Vis', '2024-11-01', '$19.71', '$19.71', '3', 'V', 'CO', 'POP', '10.00%', '100%', 'Comm', 'Comm', '', '', '$1.97']], 'table_type': 'commission_detail', 'page_number': 1, 'confidence_score': 0.95, 'summary_rows': [], 'metadata': {'total_tables_merged': 1, 'total_rows': 26, 'canonical_header': ['Company Name', 'Cov Type', 'Bill Eff Date', 'Billed Premium', 'Paid Premium', 'Sub Count', 'Adj Typ', 'Iss St', 'Method', 'Rate', 'Split %', 'Comp Type', 'Bus Type', 'Billed Fee Amount', 'Customer Paid Fee', 'Paid Amount'], 'merged_from_tables': [0]}, 'summaryRows': [], 'bracket_processing': {'enabled': True, 'total_cells_processed': 416, 'brackets_converted': 15, 'errors': 0, 'processing_method': 'professional_accounting_standard', 'validation': {'total_cells_checked': 416, 'negative_indicators_before': 14, 'negative_values_after': 17, 'data_integrity_preserved': True, 'validation_errors': []}}, 'summary_detection': {'enabled': True, 'removed_indices': [], 'detection_method': 'multi_strategy_conservative', 'detection_confidence': 0.0, 'total_rows_before': 26, 'total_rows_after': 26, 'removal_threshold': 0.75, 'strategies_used': ['semantic', 'density', 'position', 'business_logic']}, 'header': ['Company Name', 'Cov Type', 'Bill Eff Date', 'Billed Premium', 'Paid Premium', 'Sub Count', 'Adj Typ', 'Iss St', 'Method', 'Rate', 'Split %', 'Comp Type', 'Bus Type', 'Billed Fee Amount', 'Customer Paid Fee', 'Paid Amount']}, {'headers': ['Compensation Period Start Date', 'Compensation Period End Date', 'EFT Settlement Date', 'EFT Account Number', '%', 'Amount'], 'rows': [['12/18/2024', '01/07/2025', '01/13/2025', '****5680', '100', '$1935.29']], 'table_type': 'settlement_summary', 'page_number': 1, 'confidence_score': 0.98, 'summary_rows': [], 'metadata': {'total_tables_merged': 1, 'total_rows': 1, 'canonical_header': ['Compensation Period Start Date', 'Compensation Period End Date', 'EFT Settlement Date', 'EFT Account Number', '%', 'Amount'], 'merged_from_tables': [0]}, 'summaryRows': [], 'bracket_processing': {'enabled': True, 'total_cells_processed': 6, 'brackets_converted': 1, 'errors': 0, 'processing_method': 'professional_accounting_standard', 'validation': {'total_cells_checked': 6, 'negative_indicators_before': 0, 'negative_values_after': 0, 'data_integrity_preserved': True, 'validation_errors': []}}, 'summary_detection': {'enabled': True, 'removed_indices': [], 'detection_method': 'insufficient_rows', 'detection_confidence': 0.0, 'total_rows_before': 1, 'total_rows_after': 1, 'removal_threshold': 0.75, 'strategies_used': ['semantic', 'density', 'position', 'business_logic']}, 'header': ['Compensation Period Start Date', 'Compensation Period End Date', 'EFT Settlement Date', 'EFT Account Number', '%', 'Amount']}, {'headers': ['Current Compensation', 'YTD Compensation'], 'rows': [['$1935.29', '$1935.29']], 'table_type': 'compensation_summary', 'page_number': 1, 'confidence_score': 0.98, 'summary_rows': [], 'metadata': {'total_tables_merged': 1, 'total_rows': 1, 'canonical_header': ['Current Compensation', 'YTD Compensation'], 'merged_from_tables': [0]}, 'summaryRows': [], 'bracket_processing': {'enabled': True, 'total_cells_processed': 2, 'brackets_converted': 2, 'errors': 0, 'processing_method': 'professional_accounting_standard', 'validation': {'total_cells_checked': 2, 'negative_indicators_before': 0, 'negative_values_after': 0, 'data_integrity_preserved': True, 'validation_errors': []}}, 'summary_detection': {'enabled': True, 'removed_indices': [], 'detection_method': 'insufficient_rows', 'detection_confidence': 0.0, 'total_rows_before': 1, 'total_rows_after': 1, 'removal_threshold': 0.75, 'strategies_used': ['semantic', 'density', 'position', 'business_logic']}, 'header': ['Current Compensation', 'YTD Compensation']}, {'headers': ['Hold Reason', 'Compensation Type', 'Business Type', 'State', 'Hold Eff Date', 'Legal Entity'], 'rows': [['WA & PAYEE FAILED', 'Comm', 'Comm', 'GA', '07/21/2023', 'UnitedHealthcare Ins Co'], ['PAYEE FAILED', 'Comm', 'Comm', 'MA', '09/12/2024', 'UnitedHealthcare Ins Co'], ['WA & PAYEE FAILED', 'Comm', 'Comm', 'MA', '10/12/2024', 'UnitedHealthcare Ins Co'], ['WA & PAYEE FAILED', 'Comm', 'Comm', 'NV', '04/11/2024', 'UnitedHealthcare Ins Co'], ['WA & PAYEE FAILED', 'Comm', 'Comm', 'NV', '05/13/2024', 'UnitedHealthcare Ins Co'], ['WA & PAYEE FAILED', 'Comm', 'Comm', 'NV', '09/13/2024', 'UnitedHealthcare Ins Co'], ['WA FAILED', 'Comm', 'Comm', 'WA', '10/23/2024', 'UnitedHealthcare Ins Co'], ['WA FAILED', 'Comm', 'Comm', 'WA', '11/04/2024', 'UnitedHealthcare Ins Co'], ['WA FAILED', 'Comm', 'Comm', 'WA', '12/18/2024', 'UnitedHealthcare Ins Co'], ['WA FAILED', 'Comm', 'Comm', 'WA', '12/20/2024', 'UnitedHealthcare Ins Co'], ['WA & PAYEE FAILED', 'Comm', 'Comm', 'WA', '12/05/2024', 'UnitedHealthcare Ins Co'], ['WA & PAYEE FAILED', 'Comm', 'Comm', 'WA', '12/05/2024', 'UnitedHealthcare of Washington'], ['WA & PAYEE FAILED', 'Comm', 'Comm', 'WA', '06/08/2024', 'UnitedHealthcare Ins Co'], ['WA & PAYEE FAILED', 'Comm', 'Comm', 'WA', '06/08/2024', 'UnitedHealthcare of Washington'], ['PAYEE FAILED', 'Comm', 'Comm', 'WI', '04/11/2024', 'UHC of Wisconsin Inc']], 'table_type': 'business_on_hold', 'page_number': 3, 'confidence_score': 0.92, 'summary_rows': [], 'metadata': {'total_tables_merged': 1, 'total_rows': 15, 'canonical_header': ['Hold Reason', 'Compensation Type', 'Business Type', 'State', 'Hold Eff Date', 'Legal Entity'], 'merged_from_tables': [0]}, 'summaryRows': [], 'bracket_processing': {'enabled': True, 'total_cells_processed': 90, 'brackets_converted': 0, 'errors': 0, 'processing_method': 'professional_accounting_standard', 'validation': {'total_cells_checked': 90, 'negative_indicators_before': 0, 'negative_values_after': 0, 'data_integrity_preserved': True, 'validation_errors': []}}, 'summary_detection': {'enabled': True, 'removed_indices': [], 'detection_method': 'multi_strategy_conservative', 'detection_confidence': 0.0, 'total_rows_before': 15, 'total_rows_after': 15, 'removal_threshold': 0.75, 'strategies_used': ['semantic', 'density', 'position', 'business_logic']}, 'header': ['Hold Reason', 'Compensation Type', 'Business Type', 'State', 'Hold Eff Date', 'Legal Entity']}], 'extraction_method': 'claude', 'file_type': 'pdf', 'document_metadata': {'carrier_name': 'UnitedHealthcare', 'carrier_confidence': 0.98, 'statement_date': '2025-01-07', 'date_confidence': 0.95, 'broker_company': 'INNOVATIVE BPS LLC', 'broker_confidence': 0.95, 'total_pages': 3, 'file_size_mb': 0.1610870361328125, 'extraction_method': 'claude', 'claude_model': 'claude-sonnet-4-20250514'}, 'extracted_carrier': 'UnitedHealthcare', 'extracted_date': '2025-01-07', 'quality_summary': {'overall_confidence': 0.99, 'table_structure_score': 1.0, 'data_completeness': 0.99, 'extraction_accuracy': 0.99, 'issues_detected': [], 'quality_grade': 'A', 'table_count': 4}, 'metadata': {'table_count': 4, 'quality_grade': 'A', 'confidence_score': 0.99, 'token_usage': {'input_tokens': 7739, 'output_tokens': 3423}}, 'extraction_quality': {'overall_confidence': 0.99, 'table_structure_score': 1.0, 'data_completeness': 0.99, 'extraction_accuracy': 0.99, 'issues_detected': [], 'quality_grade': 'A', 'table_count': 4}, 'entities': {'carrier': {'name': 'UnitedHealthcare', 'confidence': 0.98, 'evidence': 'Document metadata'}, 'broker': {'company_name': 'INNOVATIVE BPS LLC', 'confidence': 0.95, 'evidence': 'Document metadata'}, 'writing_agents': [], 'groups_and_companies': [{'group_name': '$90.00', 'group_number': None, 'paid_amount': '$90.00'}, {'group_name': '$30.00', 'group_number': None, 'paid_amount': '$30.00'}, {'group_name': '$240.00', 'group_number': None, 'paid_amount': '$240.00'}, {'group_name': '$240.00', 'group_number': None, 'paid_amount': '$240.00'}, {'group_name': '$35.00', 'group_number': None, 'paid_amount': '$35.00'}, {'group_name': '$70.00', 'group_number': None, 'paid_amount': '$70.00'}, {'group_name': '$70.00', 'group_number': None, 'paid_amount': '$70.00'}, {'group_name': '$210.00', 'group_number': None, 'paid_amount': '$210.00'}, {'group_name': '$35.00', 'group_number': None, 'paid_amount': '$35.00'}, {'group_name': '($50.00)', 'group_number': None, 'paid_amount': '($50.00)'}, {'group_name': '$50.00', 'group_number': None, 'paid_amount': '$50.00'}, {'group_name': '$250.00', 'group_number': None, 'paid_amount': '$250.00'}, {'group_name': '$150.00', 'group_number': None, 'paid_amount': '$150.00'}, {'group_name': '$400.00', 'group_number': None, 'paid_amount': '$400.00'}], 'document_metadata': {'carrier_name': 'UnitedHealthcare', 'carrier_confidence': 0.98, 'statement_date': '2025-01-07', 'date_confidence': 0.95, 'broker_company': 'INNOVATIVE BPS LLC', 'broker_confidence': 0.95, 'total_pages': 3, 'file_size_mb': 0.1610870361328125, 'extraction_method': 'claude', 'claude_model': 'claude-sonnet-4-20250514'}}, 'relationships': {'carrier_to_broker': {'carrier': 'UnitedHealthcare', 'broker': 'INNOVATIVE BPS LLC', 'relationship': 'issues_commission_to'}, 'broker_to_agents': [], 'agents_to_groups': [{'agent': 'Unknown', 'group': '$90.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$30.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$240.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$240.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$35.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$70.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$70.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$210.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$35.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '($50.00)', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$50.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$250.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$150.00', 'relationship': 'manages'}, {'agent': 'Unknown', 'group': '$400.00', 'relationship': 'manages'}], 'groups_to_payments': [{'group': '$90.00', 'amount': '$90.00', 'relationship': 'generates_commission'}, {'group': '$30.00', 'amount': '$30.00', 'relationship': 'generates_commission'}, {'group': '$240.00', 'amount': '$240.00', 'relationship': 'generates_commission'}, {'group': '$240.00', 'amount': '$240.00', 'relationship': 'generates_commission'}, {'group': '$35.00', 'amount': '$35.00', 'relationship': 'generates_commission'}, {'group': '$70.00', 'amount': '$70.00', 'relationship': 'generates_commission'}, {'group': '$70.00', 'amount': '$70.00', 'relationship': 'generates_commission'}, {'group': '$210.00', 'amount': '$210.00', 'relationship': 'generates_commission'}, {'group': '$35.00', 'amount': '$35.00', 'relationship': 'generates_commission'}, {'group': '($50.00)', 'amount': '($50.00)', 'relationship': 'generates_commission'}, {'group': '$50.00', 'amount': '$50.00', 'relationship': 'generates_commission'}, {'group': '$250.00', 'amount': '$250.00', 'relationship': 'generates_commission'}, {'group': '$150.00', 'amount': '$150.00', 'relationship': 'generates_commission'}, {'group': '$400.00', 'amount': '$400.00', 'relationship': 'generates_commission'}]}, 'business_intelligence': {'total_commission_amount': 'Not specified', 'number_of_groups': 14, 'commission_structures': ['Percentage-based', 'PEPM'], 'top_contributors': [{'name': '$400.00', 'amount': '$400.00'}, {'name': '$250.00', 'amount': '$250.00'}, {'name': '$240.00', 'amount': '$240.00'}], 'special_payments': [], 'payment_period': '', 'patterns_detected': ['Large portfolio with 14 groups']}, 'summary': 'This is  a UnitedHealthcare commission statement for INNOVATIVE BPS LLC dated January 7, 2025, showing commission payments across 14 separate line items totaling $1,380.00 in gross commissions. The payment structure reveals significant variation in commission amounts, with the largest single payment at $400.00, followed by $250.00 and two payments of $240.00 each, while smaller amounts range from $30.00 to $210.00. The statement includes one notable chargeback of ($50.00) that was subsequently offset by a matching $50.00 credit, indicating an adjustment or correction was processed during this period. The commission structure appears to use both percentage-based and PEPM methodologies across the portfolio, though specific agent assignments and group identifiers are not detailed in this particular statement format.', 'extraction_pipeline': '3-phase-enhanced', 'semantic_extraction_success': True}
INFO:app.services.cancellation_manager:Cleared cancellation status for upload upload_1762534835960_9juu9tf2m
INFO:app.api.new_extract:ğŸ’¾ Updating upload record with results...
INFO:app.api.new_extract:âœ… Upload record updated successfully
INFO:app.services.audit_logging_service:Audit: data_view by user f6cf1764-5bfc-4352-abd9-81b72b7cf191 on extraction_complete (ID: 56fa1a44-53e3-4511-87c5-07437667ff38)
INFO:app.api.new_extract:ğŸ¯ Format Learning: Using carrier UnitedHealthcare with ID 4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d
WARNING:app.api.new_extract:ğŸš¨ CARRIER MISMATCH DETECTED: File uploaded to aa4a116d-b561-4eae-a3cc-7b0bda919685 but extracted as UnitedHealthcare (4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d)
INFO:app.api.new_extract:ğŸ”„ Reassigning file to correct carrier: UnitedHealthcare
INFO:app.services.gcs_utils:âœ… File copied in GCS: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf -> statements/4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.gcs_utils:âœ… File deleted from GCS: statements/56fa1a44-53e3-4511-87c5-07437667ff38/01.07.2025 UHC Commission Statement.pdf
INFO:app.services.gcs_utils:âœ… Generated signed URL for GCS file with inline headers: statements/4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d/01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:âœ… File moved to correct carrier folder in GCS: statements/4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d/01.07.2025 UHC Commission Statement.pdf
INFO:app.api.new_extract:âœ… Updated statement upload: carrier_id=4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d, company_id=4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d
INFO:app.api.new_extract:ğŸ” Multiple tables detected (4), analyzing for field mapping suitability
INFO:app.api.new_extract:ğŸ“Š Using first table for field mapping (intelligent selection not yet implemented)
INFO:app.api.new_extract:ğŸ¯ Using table 0 for field mapping with 16 headers
ğŸ¯ FormatLearningService: Finding matching format for company 4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d
ğŸ¯ FormatLearningService: Headers: ['Company Name', 'Cov Type', 'Bill Eff Date', 'Billed Premium', 'Paid Premium', 'Sub Count', 'Adj Typ', 'Iss St', 'Method', 'Rate', 'Split %', 'Comp Type', 'Bus Type', 'Billed Fee Amount', 'Customer Paid Fee', 'Paid Amount']
ğŸ¯ FormatLearningService: Table structure: {'row_count': 26, 'column_count': 16, 'has_financial_data': True}
ğŸ¯ FormatLearningService: Headers type: <class 'list'>
ğŸ¯ FormatLearningService: Headers length: 16
ğŸ¯ CRUD: Finding best matching format for company 4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d
ğŸ¯ CRUD: Input headers: ['Company Name', 'Cov Type', 'Bill Eff Date', 'Billed Premium', 'Paid Premium', 'Sub Count', 'Adj Typ', 'Iss St', 'Method', 'Rate', 'Split %', 'Comp Type', 'Bus Type', 'Billed Fee Amount', 'Customer Paid Fee', 'Paid Amount']
ğŸ¯ CRUD: Input table structure: {'row_count': 26, 'column_count': 16, 'has_financial_data': True}
ğŸ¯ CRUD: Found 0 saved formats for company
ğŸ¯ FormatLearningService: Best match score: 0
ğŸ¯ FormatLearningService: No matching format found
INFO:app.api.new_extract:ğŸ¯ Format Learning: No matching format found (score: 0.0)
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Step started: Understanding Structure (Step 4) for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.ai_plan_type_detection_service:AI Plan Type Detection Service initialized successfully
INFO:app.api.new_extract:ğŸ” AI Plan Type Detection: Detecting plan types during extraction
INFO:app.services.ai_plan_type_detection_service:ğŸ” AI Plan Detection: Analyzing document for insurance plan types
INFO:httpx:HTTP Request: POST https://api.mistral.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.services.ai_plan_type_detection_service:âœ… AI successfully detected plan types
INFO:app.services.ai_plan_type_detection_service:âœ… AI Plan Detection: Found 1 plan types with 0.95 confidence
INFO:app.api.new_extract:âœ… AI Plan Detection: 1 plan types with 0.95 confidence
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Step started: AI Field Mapping (Step 5) for upload_id upload_1762534835960_9juu9tf2m
INFO:app.api.new_extract:ğŸ§  AI Field Mapping: Starting field mapping during extraction
INFO:app.api.ai_intelligent_mapping:ğŸš€ Enhanced AI Analysis Request: User muhammad@pinecrestconsulting.com
INFO:app.services.ai_field_mapping_service:ğŸ¤– AI Mapping: Analyzing 16 headers with AI intelligence
INFO:app.services.ai_field_mapping_service:ğŸ” AI Mapping: carrier_id provided: True (value: 4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d)
INFO:app.services.ai_field_mapping_service:ğŸ¯ Carrier ID is valid, attempting to retrieve learned mapping for carrier 4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d
INFO:app.services.ai_field_mapping_service:ğŸ” Generated format signature for lookup: 9ff6925662a0c2baadcc65242ff62669
INFO:app.services.ai_field_mapping_service:ğŸ” Looking up learned format for carrier 4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d with 16 headers
INFO:app.services.ai_field_mapping_service:âŒ No exact match found, trying fuzzy matching...
INFO:app.services.ai_field_mapping_service:ğŸ” Found 0 saved formats for fuzzy matching
INFO:app.services.ai_field_mapping_service:âŒ No matching format found
INFO:app.services.ai_field_mapping_service:âŒ No learned mapping found for carrier 4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d
INFO:httpx:HTTP Request: POST https://api.mistral.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.services.ai_field_mapping_service:âœ… AI successfully generated field mappings
INFO:app.services.ai_field_mapping_service:âœ… AI Mapping: Generated 13 mappings with 0.85 confidence
INFO:app.services.ai_plan_type_detection_service:ğŸ” AI Plan Detection: Analyzing document for insurance plan types
INFO:httpx:HTTP Request: POST https://api.mistral.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.services.ai_plan_type_detection_service:âœ… AI successfully detected plan types
INFO:app.services.ai_plan_type_detection_service:âœ… AI Plan Detection: Found 1 plan types with 0.95 confidence
INFO:app.api.ai_intelligent_mapping:âœ… Enhanced AI Analysis Complete: Overall confidence 0.90
INFO:app.api.new_extract:âœ… AI Field Mapping: 13 mappings with 0.85 confidence
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_STARTED
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Step started: Preparing Results (Step 6) for upload_id upload_1762534835960_9juu9tf2m
INFO:app.api.new_extract:âœ… Enhanced summary already generated by Claude pipeline - using it
INFO:app.api.new_extract:   Enhanced summary: This is  a UnitedHealthcare commission statement for INNOVATIVE BPS LLC dated January 7, 2025, showing commission payments across 14 separate line items totaling $1,380.00 in gross commissions. The payment structure reveals significant variation in commission amounts, with the largest single payment at $400.00, followed by $250.00 and two payments of $240.00 each, while smaller amounts range from $30.00 to $210.00. The statement includes one notable chargeback of ($50.00) that was subsequently offset by a matching $50.00 credit, indicating an adjustment or correction was processed during this period. The commission structure appears to use both percentage-based and PEPM methodologies across the portfolio, though specific agent assignments and group identifiers are not detailed in this particular statement format.
INFO:app.services.user_profile_service:Recorded contribution: upload for user f6cf1764-5bfc-4352-abd9-81b72b7cf191
INFO:app.services.audit_logging_service:Audit: file_upload by user f6cf1764-5bfc-4352-abd9-81b72b7cf191 on statement_upload (ID: 56fa1a44-53e3-4511-87c5-07437667ff38)
INFO:app.api.new_extract:ğŸ“¤ Sending pre-generated enhanced summary via WebSocket...
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: STEP_PROGRESS
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Broadcasting message to upload_id upload_1762534835960_9juu9tf2m: EXTRACTION_COMPLETE
INFO:app.services.websocket_service:Found 1 connections for upload_id upload_1762534835960_9juu9tf2m
INFO:app.services.websocket_service:Extraction complete for upload_id upload_1762534835960_9juu9tf2m
INFO:app.api.new_extract:âœ… Extraction complete! Sent results via WebSocket for upload_id: upload_1762534835960_9juu9tf2m
INFO:     connection closed
INFO:app.api.websocket:WebSocket disconnected: upload_id=upload_1762534835960_9juu9tf2m, session_id=session_1762534835990_g6zwtwaf8
INFO:app.services.websocket_service:WebSocket disconnected: upload_id=upload_1762534835960_9juu9tf2m, session_id=session_1762534835990_g6zwtwaf8
INFO:app.api.websocket:WebSocket cleanup completed for upload_id=upload_1762534835960_9juu9tf2m
INFO:     127.0.0.1:62884 - "POST /api/extract-tables-smart/ HTTP/1.1" 200 OK
INFO:app.api.pdf_proxy:ğŸ”„ Proxying PDF from: https://storage.googleapis.com/pdf_extraction_files_saver/statements/4d082ba4-43c0-44e2-8c9b-cbd8f14...
INFO:httpx:HTTP Request: GET https://storage.googleapis.com/pdf_extraction_files_saver/statements/4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d/01.07.2025%20UHC%20Commission%20Statement.pdf?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=docsai-table-extractor%40pdf-tables-extractor-465009.iam.gserviceaccount.com%2F20251107%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20251107T170210Z&X-Goog-Expires=3599&X-Goog-SignedHeaders=host&response-content-disposition=inline&response-content-type=application%2Fpdf&X-Goog-Signature=7d796ff391f021ed2f318c5a58bca98391757a7c2ca589f44699d4b84528e1b30821e10661f85035894a9357a7448785491b9122959d85b25ef776293f2660eaf9994c26e0c2820ecbec49a414078708bd1242582bf0732a93b3140694219315cb6b96dd65ad941edb840cfc935296559a08b844d759ac0e71dada2db6a664941f105ae55e2234acaa9a03f668c9d573dd878dad78042b3f91e79f1e137bc3a82071126a82e096a7c753c7c88b6f2ddb05ea0eb8b813479879b47a3301b42c7e759beec24b8ee93d1ff6a9b155936f27c96fbabcf77d8a5fcb083f0b64fd8732c9c89e3038e88a767b329b058dfbc809f2267dc67a9a2e08776880012f99ef26 "HTTP/1.1 200 OK"
INFO:     127.0.0.1:63391 - "GET /api/pdf-proxy?url=https%3A%2F%2Fstorage.googleapis.com%2Fpdf_extraction_files_saver%2Fstatements%2F4d082ba4-43c0-44e2-8c9b-cbd8f148ed9d%2F01.07.2025%2520UHC%2520Commission%2520Statement.pdf%3FX-Goog-Algorithm%3DGOOG4-RSA-SHA256%26X-Goog-Credential%3Ddocsai-table-extractor%2540pdf-tables-extractor-465009.iam.gserviceaccount.com%252F20251107%252Fauto%252Fstorage%252Fgoog4_request%26X-Goog-Date%3D20251107T170210Z%26X-Goog-Expires%3D3599%26X-Goog-SignedHeaders%3Dhost%26response-content-disposition%3Dinline%26response-content-type%3Dapplication%252Fpdf%26X-Goog-Signature%3D7d796ff391f021ed2f318c5a58bca98391757a7c2ca589f44699d4b84528e1b30821e10661f85035894a9357a7448785491b9122959d85b25ef776293f2660eaf9994c26e0c2820ecbec49a414078708bd1242582bf0732a93b3140694219315cb6b96dd65ad941edb840cfc935296559a08b844d759ac0e71dada2db6a664941f105ae55e2234acaa9a03f668c9d573dd878dad78042b3f91e79f1e137bc3a82071126a82e096a7c753c7c88b6f2ddb05ea0eb8b813479879b47a3301b42c7e759beec24b8ee93d1ff6a9b155936f27c96fbabcf77d8a5fcb083f0b64fd8732c9c89e3038e88a767b329b058dfbc809f2267dc67a9a2e08776880012f99ef26 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63389 - "GET /api/pending/progress/56fa1a44-53e3-4511-87c5-07437667ff38/table_editor HTTP/1.1" 200 OK
